"use strict";(self["webpackChunkdemo1"]=self["webpackChunkdemo1"]||[]).push([[579],{9945:function(e,t){const a={};t["Z"]=a},5231:function(e,t,a){a.r(t),a.d(t,{default:function(){return He}});var i=a(6252),l=a(3577),s=a(9963);const n={class:"container pt-2 pb-4"},r={class:"d-flex align-items-center position-relative mt-2"},o={class:"svg-icon svg-icon-1 position-absolute ms-6"},m={class:"svg-icon svg-icon-2"},c={class:"svg-icon svg-icon-2"},d={class:"card-body pt-0 row"},u={class:"text-white text-hover-primary fw-bolder fs-8"},p={class:"text-white text-hover-primary fw-bolder fs-8"},_={class:"text-white text-hover-primary fw-bolder fs-8"},w={class:"text-white text-hover-primary fw-bolder fs-8"},v={class:"text-white text-hover-primary fw-bolder fs-8"},g={class:"text-white text-hover-primary fw-bolder fs-6"},f={class:"text-white text-hover-secondary flex-column fw-bolder fs-8 d-flex"},h={class:"mr-2"},b={class:"mr-2"},x={class:"mr-2"},y={class:"mr-2"},k={class:"mr-2"},W={class:"text-white text-hover-primary fw-bolder fs-8"},z={class:"text-white text-hover-primary fw-bolder fs-8"},V={class:"badge fw-bold py-2 px-4 badge-light medium-text"},G={class:"text-primary fs-6 mr-2"},C={class:"text-success fs-6 mr-2"},E={class:"text-danger fs-6 mr-2"},A={class:"flex-grow-1 ml-2"},U={class:"fw-bold d-block"},q={class:"flex-grow-1 ml-2"},F={class:"fw-bold d-block"},S={class:"flex-grow-1 ml-2"},D={class:"fw-bold d-block"},P={class:"text-primary fs-6 mr-2"},$={class:"text-success fs-6 mr-2"},R={class:"text-danger fs-6 mr-2"},I={class:"d-flex flex-column w-100 me-2"},N=(0,i._)("div",{class:"d-flex flex-stack mb-2"},[(0,i._)("span",{class:"text-muted me-2 fs-7 fw-bold"},(0,l.zw)(60)+"% ")],-1),M={class:"progress h-6px w-100"},Z={class:"pagination sticky-bottom mr-5"},H={class:"text-grey-lighten-1 mx-5 pt-2"},j=(0,i._)("a",{class:"page-link bg-green-accent-1"},[(0,i._)("i",{class:"previous"})],-1),T=[j],B=["onClick"],L=(0,i._)("a",{class:"page-link bg-green-accent-1"},[(0,i._)("i",{class:"next"})],-1),Y=[L],K={key:0,class:"p-2 col-xl-3"};function O(e,t,a,j,L,O){const X=(0,i.up)("inline-svg"),J=(0,i.up)("v-col"),Q=(0,i.up)("v-icon"),ee=(0,i.up)("v-btn"),te=(0,i.up)("router-link"),ae=(0,i.up)("v-row"),ie=(0,i.up)("v-tooltip"),le=(0,i.up)("v-chip"),se=(0,i.up)("v-data-table"),ne=(0,i.up)("v-card"),re=(0,i.up)("FilterAE2");return(0,i.wg)(),(0,i.j4)(ne,{class:"bg-transparent p-2 px-3 card-data-table"},{default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i.Wm)(ae,null,{default:(0,i.w5)((()=>[(0,i.Wm)(J,{cols:"12",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",r,[(0,i._)("span",o,[(0,i.Wm)(X,{src:"media/icons/duotune/general/gen021.svg"})]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.search=t),class:"form-control form-control-solid w-250px ps-15",placeholder:"Rechercher"},null,512),[[s.nr,e.search]])])])),_:1}),(0,i.Wm)(J,{cols:"12",md:"6",class:"d-flex justify-end align-items-end"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(ee,{onClick:e.toggleColumn,class:"mr-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Q,{icon:"mdi-arrow-"+e.icon_expand},null,8,["icon"])])),_:1},8,["onClick"]),(0,i.Wm)(ee,{onClick:e.exportToExcel,class:"btn btn-sm btn-light mr-2",id:"kt_user_follow_button"},{default:(0,i.w5)((()=>[(0,i._)("span",m,[(0,i.Wm)(X,{src:"media/icons/duotune/arrows/arr078.svg"})]),(0,i.Uk)(" Exporter ")])),_:1},8,["onClick"]),(0,i.Wm)(te,{to:"/apps/analyse/add-analyse",class:"btn btn-sm btn-primary btn-hover-secondary text-hover-dark mr-3"},{default:(0,i.w5)((()=>[(0,i._)("span",c,[(0,i.Wm)(X,{src:"media/icons/duotune/arrows/arr075.svg"})]),(0,i.Uk)(" Ajouter une AE ")])),_:1})])])),_:1})])),_:1})]),(0,i._)("div",d,[(0,i.Wm)(ne,{class:(0,l.C_)({"p-2":e.isExpanded,"col-xl-12":!e.isExpanded,"col-xl-9":e.isExpanded})},{default:(0,i.w5)((()=>[(0,i.Wm)(se,{theme:!1,"show-select":"","fixed-header":"",page:e.page,"onUpdate:page":t[5]||(t[5]=t=>e.page=t),id:"element",items:e.dataAE,search:e.search,"items-per-page":e.itemsPerPage,headers:e.visibleHeaders,class:"primary table d-flex justify-center","hide-default-footer":"",dense:"","item-key":"id","row-height":"4vh"},{["item.id"]:(0,i.w5)((({item:e})=>[(0,i._)("p",u,[(0,i.Wm)(te,{to:`/apps/analyse/show-analyse/${e.raw.id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" AE- "+(0,l.zw)(e.columns.id),1)])),_:2},1032,["to"])])])),["item.processus"]:(0,i.w5)((({item:e})=>[(0,i._)("p",p,(0,l.zw)(e.columns.processus),1)])),["item.service"]:(0,i.w5)((({item:e})=>[(0,i._)("p",_,(0,l.zw)(e.columns.service),1)])),["item.activite"]:(0,i.w5)((({item:e})=>[(0,i._)("p",w,(0,l.zw)(e.columns.activite),1)])),["item.zone"]:(0,i.w5)((({item:e})=>[(0,i._)("p",v,(0,l.zw)(e.columns.zone),1)])),["item.poste_travail"]:(0,i.w5)((({item:e})=>[(0,i._)("p",g,(0,l.zw)(e.columns.poste_travail),1)])),["item.s_a_z_p"]:(0,i.w5)((({item:e})=>[(0,i._)("div",f,[(0,i._)("span",h,(0,l.zw)(e.raw.processus?.name),1),(0,i._)("span",b,(0,l.zw)(e.raw.service?.name),1),(0,i._)("span",x,(0,l.zw)(e.raw.activite?.name),1),(0,i._)("span",y,(0,l.zw)(e.raw.zone?.name),1),(0,i._)("span",k,(0,l.zw)(e.raw.poste_travail?.name),1)])])),["item.aspect"]:(0,i.w5)((({item:e})=>[(0,i._)("p",W,(0,l.zw)(e.columns.aspect),1)])),["item.impact"]:(0,i.w5)((({item:e})=>[(0,i._)("p",z,(0,l.zw)(e.columns.impact),1)])),["item.theme"]:(0,i.w5)((({item:e})=>[(0,i._)("h2",V,(0,l.zw)(e.columns.theme),1)])),["item.situation"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.columns.situation}`},{activator:(0,i.w5)((({props:t})=>[(0,i._)("h2",(0,i.dG)(t,{class:["badge-"+(e.columns.situation?.startsWith("U")?"danger":e.columns.situation?.startsWith("D")?"warning":"light"),"medium-text badge fw-bold py-2 px-4"]}),(0,l.zw)(e.columns.situation?.charAt(0)),17)])),_:2},1032,["text"])])),["item.frequence"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.columns.frequence}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"fw-bolder py-1 px-4",size:"large",color:"antiquewhite",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.raw.frequence?.value),1)])),_:2},1040)])),_:2},1032,["text"])])),["item.niveau_maitrise"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.columns.niveau_maitrise}`},{activator:(0,i.w5)((({props:t})=>[(0,i._)("h2",(0,i.dG)({class:"badge fw-bold py-2 px-4 badge-light medium-text"},t),(0,l.zw)(e.raw.niveau_maitrise?.niveau),17)])),_:2},1032,["text"])])),["item.niveau_priorite"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.raw.niveau_priorite?.ies}`},{activator:(0,i.w5)((({props:t})=>[(0,i._)("h2",(0,i.dG)({class:["badge fw-bold py-2 px-4 medium-text","P1"==e.raw.niveau_priorite?.name?"badge-danger":"P2"==e.raw.niveau_priorite?.name?"badge-warning":"badge-light"]},t),(0,l.zw)(e.raw.niveau_priorite?.name),17)])),_:2},1032,["text"])])),["item.gravite"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.raw.gravite_etendu?.description}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"ma-1",color:"primary",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i._)("span",G,"Étendu : "+(0,l.zw)(e.raw.gravite_etendu?.value),1)])),_:2},1040)])),_:2},1032,["text"]),(0,i.Wm)(ie,{text:`${e.raw.gravite_persistance?.description}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"ma-1",color:"success",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i._)("span",C," Persistance : "+(0,l.zw)(e.raw.gravite_persistance?.value),1)])),_:2},1040)])),_:2},1032,["text"]),(0,i.Wm)(ie,{text:`${e.raw.gravite_dangerosite?.description}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"ma-1",color:"danger",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i._)("span",E,"Dangerosité : "+(0,l.zw)(e.raw.gravite_dangerosite?.value),1)])),_:2},1040)])),_:2},1032,["text"])])),["item.gravite_etendu"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.columns?.gravite_etendu}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"fw-bolder py-1 px-4",size:"large",color:"primary",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.raw.gravite_etendu?.value),1)])),_:2},1040)])),_:2},1032,["text"])])),["item.gravite_dangerosite"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.columns?.gravite_dangerosite}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"fw-bolder py-1 px-4",size:"large",color:"danger",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.raw.gravite_dangerosite?.value),1)])),_:2},1040)])),_:2},1032,["text"])])),["item.gravite_persistance"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.columns.gravite_persistance}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"fw-bolder py-1 px-4",size:"large",color:"success",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.raw.gravite_persistance?.value),1)])),_:2},1040)])),_:2},1032,["text"])])),["item.F_G"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(le,{class:"fw-bolder py-1 px-4",size:"large",variant:"outlined",color:""+(e.columns.s_ns?"danger":"info")},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.columns.F_G),1)])),_:2},1032,["color"])])),["item.moyen_maitrise_humains"]:(0,i.w5)((({item:a})=>[a.columns.moyen_maitrise_humains&&a.columns.moyen_maitrise_humains.length>0?((0,i.wg)(),(0,i.iD)("ul",{key:0,class:(0,l.C_)(["my-2",e.isExpanded?"small-cell":"max-width-cell"]),onClick:t[2]||(t[2]=t=>e.changeWidth(t))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.columns.moyen_maitrise_humains,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:(0,l.C_)([{"mb-2":a.columns.moyen_maitrise_humains.length-1!==t},"d-flex align-items-center"])},[(0,i._)("span",{class:(0,l.C_)(["bullet bullet-vertical h-15px","bg-light"])}),(0,i._)("div",A,[(0,i._)("span",U,(0,l.zw)(e.name),1)])],2)))),128)),a.columns.moyen_maitrise_humains.length>1?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t[1]||(t[1]=(...t)=>e.toggleList&&e.toggleList(...t))}," ... ")):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0)])),["item.moyen_maitrise_techniques"]:(0,i.w5)((({item:a})=>[a.columns.moyen_maitrise_techniques&&a.columns.moyen_maitrise_techniques.length>0?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,l.C_)(["my-2",e.isExpanded?"small-cell":"max-width-cell"]),onClick:t[3]||(t[3]=t=>e.changeWidth(t))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.columns.moyen_maitrise_techniques,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:(0,l.C_)([{"mb-2":a.columns.moyen_maitrise_techniques.length-1!==t},"d-flex align-items-center"])},[(0,i._)("span",{class:(0,l.C_)(["bullet bullet-vertical h-15px","bg-light"])}),(0,i._)("div",q,[(0,i._)("span",F,(0,l.zw)(e.name),1)])],2)))),128))],2)):(0,i.kq)("",!0)])),["item.moyen_maitrise_organisations"]:(0,i.w5)((({item:a})=>[a.columns.moyen_maitrise_organisations&&a.columns.moyen_maitrise_organisations.length>0?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,l.C_)(["my-2",e.isExpanded?"small-cell":"max-width-cell"]),onClick:t[4]||(t[4]=t=>e.changeWidth(t))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.columns.moyen_maitrise_organisations,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:(0,l.C_)([{"mb-2":a.columns.moyen_maitrise_organisations.length-1!==t},"d-flex align-items-center"])},[(0,i._)("span",{class:(0,l.C_)(["bullet bullet-vertical h-15px","bg-light"])}),(0,i._)("div",S,[(0,i._)("span",D,(0,l.zw)(e.name),1)])],2)))),128))],2)):(0,i.kq)("",!0)])),["item.frequence_ir"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.columns.frequence_ir}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"fw-bolder py-1 px-4",size:"large",color:"antiquewhite",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.raw.frequence_ir?.value),1)])),_:2},1040)])),_:2},1032,["text"])])),["item.gravite_ir"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.raw.gravite_etendu_ir?.description}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"ma-1",color:"primary",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i._)("span",P,"Étendu : "+(0,l.zw)(e.raw.gravite_etendu_ir?.value),1)])),_:2},1040)])),_:2},1032,["text"]),(0,i.Wm)(ie,{text:`${e.raw.gravite_persistance_ir?.description}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"ma-1",color:"success",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i._)("span",$," Persistance : "+(0,l.zw)(e.raw.gravite_persistance_ir?.value),1)])),_:2},1040)])),_:2},1032,["text"]),(0,i.Wm)(ie,{text:`${e.raw.gravite_dangerosite_ir?.description}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"ma-1",color:"danger",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i._)("span",R,"Dangerosité : "+(0,l.zw)(e.raw.gravite_dangerosite_ir?.value),1)])),_:2},1040)])),_:2},1032,["text"])])),["item.gravite_etendu_ir"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.columns.gravite_etendu_ir}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"ma-2 fw-bolder py-2 px-4",size:"large",color:"primary",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.raw.gravite_etendu_ir?.value),1)])),_:2},1040)])),_:2},1032,["text"])])),["item.gravite_dangerosite_ir"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.columns.gravite_dangerosite_ir}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"ma-2 fw-bolder py-2 px-4",size:"large",color:"danger",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.raw.gravite_dangerosite_ir?.value),1)])),_:2},1040)])),_:2},1032,["text"])])),["item.gravite_persistance_ir"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(ie,{text:`${e.columns.gravite_persistance_ir}`},{activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(le,(0,i.dG)({class:"ma-2 fw-bolder py-2 px-4",size:"large",color:"success",variant:"outlined"},t),{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.raw.gravite_persistance_ir?.value),1)])),_:2},1040)])),_:2},1032,["text"])])),["item.impact_residuel"]:(0,i.w5)((({item:e})=>[(0,i.Wm)(le,{class:"ma-2 fw-bolder py-2 px-4",size:"large",color:"antiquewhite",variant:"outlined"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.columns.impact_residuel),1)])),_:2},1024)])),["item.s_ns"]:(0,i.w5)((({item:e})=>[(0,i._)("h2",{class:(0,l.C_)(["badge-light-"+(e.columns.s_ns?"danger":"success"),"medium-text badge fw-bold py-2 px-4"])},(0,l.zw)(e.columns.s_ns?"S":"NS"),3)])),["item.actions"]:(0,i.w5)((({item:t})=>[(0,i.Wm)(ae,{justify:"space-between",class:"text-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(te,{to:`/apps/analyse/show-analyse/${t.raw.id}`},{default:(0,i.w5)((()=>[(0,i.Wm)(ee,{color:"info",size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(Q,{class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-eye")])),_:1})])),_:1})])),_:2},1032,["to"]),(0,i.Wm)(te,{to:`/apps/analyse/edit-analyse/${t.raw.id}`},{default:(0,i.w5)((()=>[(0,i.Wm)(ee,{color:"warning",size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(Q,{class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-pencil")])),_:1})])),_:1})])),_:2},1032,["to"]),(0,i.Wm)(ee,{color:"danger",size:"small",onClick:a=>e.deleteItem(t)},{default:(0,i.w5)((()=>[(0,i.Wm)(Q,{class:"text-white"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-delete")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),["item.progress"]:(0,i.w5)((()=>[(0,i._)("div",I,[N,(0,i._)("div",M,[(0,i._)("div",{class:(0,l.C_)(["progress-bar","bg-warning"]),role:"progressbar",style:{width:"60%"},"aria-valuenow":60,"aria-valuemin":"0","aria-valuemax":"100"})])])])),_:2},1032,["page","items","search","items-per-page","headers"]),(0,i._)("ul",Z,[(0,i._)("p",H,(0,l.zw)(e.dataAE.length)+" / "+(0,l.zw)(e.initialData.length),1),(0,i._)("li",{class:"page-item previous",onClick:t[6]||(t[6]=(...t)=>e.previousPage&&e.previousPage(...t))},T),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.pageCount,(t=>((0,i.wg)(),(0,i.iD)("li",{class:(0,l.C_)(["page-item",{active:e.page===t}]),key:t},[(0,i._)("a",{class:"page-link",onClick:(0,s.iM)((a=>e.setpage(t)),["prevent"])},(0,l.zw)(t),9,B)],2)))),128)),(0,i._)("li",{class:"page-item next",onClick:t[7]||(t[7]=(...t)=>e.nextPage&&e.nextPage(...t))},Y)])])),_:1},8,["class"]),e.isExpanded?((0,i.wg)(),(0,i.iD)("div",K,[(0,i.Wm)(re,{data_filter:e.data_filter,"onUpdate:data_filter":t[8]||(t[8]=t=>e.data_filter=t)},null,8,["data_filter"])])):(0,i.kq)("",!0)])])),_:1})}var X=a(2262),J=a(8932),Q=a(7677);const ee=[];var te=ee;const ae=(0,i._)("div",{class:"px-7 py-5"},[(0,i._)("div",{class:"fs-5 text-white fw-bolder"},"Filtres")],-1),ie=(0,i._)("div",{class:"separator border-gray-200"},null,-1),le={class:"px-2 py-5"},se={class:"mb-2"},ne={class:"text-white-50 fw-bold fs-6"},re={class:"mb-2"},oe={class:"text-white-50 fw-bold fs-6"},me={class:"mb-2"},ce={class:"text-white fw-bold fs-6"},de={class:"mb-2"},ue={class:"text-white fw-bold fs-6"},pe={class:"mb-2"},_e={class:"text-white fw-bold fs-6"},we={class:"mb-2"},ve={class:"text-white fw-bold fs-6"},ge={class:"mb-2"},fe={class:"text-white fw-bold fs-6"},he={class:"mb-2"},be={class:"text-white fw-bold fs-6"},xe={class:"mb-2"},ye={class:"text-white fw-bold fs-6"},ke=(0,i._)("div",null,[(0,i._)("strong",null,"Situation")],-1),We={class:"mb-2"},ze=(0,i._)("label",{class:"form-label fw-bold text-white mb-8"},"F * G :",-1),Ve={class:"mb-2"},Ge=(0,i._)("label",{class:"form-label fw-bold text-white mb-8"},"Impact Résiduel:",-1),Ce={class:"mb-2"},Ee=(0,i._)("label",{class:"form-label fw-bold text-white"},"Significatif:",-1),Ae={class:"d-flex justify-content-end"};function Ue(e,t,a,n,r,o){const m=(0,i.up)("v-text-field"),c=(0,i.up)("v-autocomplete"),d=(0,i.up)("v-icon"),u=(0,i.up)("v-btn"),p=(0,i.up)("v-radio"),_=(0,i.up)("v-radio-group"),w=(0,i.up)("v-range-slider"),v=(0,i.up)("v-form"),g=(0,i.up)("v-card");return(0,i.wg)(),(0,i.j4)(g,{class:"ml-1 bg-smm-filter"},{default:(0,i.w5)((()=>[ae,ie,(0,i.Wm)(v,{onSubmit:t[16]||(t[16]=(0,s.iM)((()=>{}),["prevent"]))},{default:(0,i.w5)((()=>[(0,i._)("div",le,[(0,i._)("div",se,[(0,i._)("div",ne,[(0,i.Wm)(m,{label:"Année",modelValue:e.filter_options.year,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter_options.year=t),type:"number"},null,8,["modelValue"])])]),(0,i._)("div",re,[(0,i._)("div",oe,[(0,i.Wm)(c,{color:"yellow",label:"Service",class:"shrink-text",modelValue:e.filter_options.service,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter_options.service=t),items:e.listValRef.services,"item-title":"name","item-value":"id",clearable:"",density:"compact"},null,8,["modelValue","items"])])]),(0,i._)("div",me,[(0,i._)("div",ce,[(0,i.Wm)(c,{color:"yellow",label:"Activité",modelValue:e.filter_options.activite,"onUpdate:modelValue":t[2]||(t[2]=t=>e.filter_options.activite=t),items:e.listValRef.activites,"item-title":"name","item-value":"id",density:"compact",filled:"",clearable:""},null,8,["modelValue","items"])])]),(0,i._)("div",de,[(0,i._)("div",ue,[(0,i.Wm)(c,{color:"yellow",label:"Zone",modelValue:e.filter_options.zone,"onUpdate:modelValue":t[3]||(t[3]=t=>e.filter_options.zone=t),items:e.listValRef.zones,"item-title":"name","item-value":"id",density:"compact",filled:"",clearable:""},null,8,["modelValue","items"])])]),(0,i._)("div",pe,[(0,i._)("div",_e,[(0,i.Wm)(c,{color:"yellow",label:"Poste de travail",modelValue:e.filter_options.poste_travail,"onUpdate:modelValue":t[4]||(t[4]=t=>e.filter_options.poste_travail=t),items:e.listValRef.poste_travails,"item-title":"name","item-value":"id",density:"compact",filled:"",clearable:""},null,8,["modelValue","items"])])]),(0,i._)("div",we,[(0,i._)("div",ve,[(0,i.Wm)(c,{color:"yellow",label:"Aspect",modelValue:e.filter_options.aspect,"onUpdate:modelValue":t[5]||(t[5]=t=>e.filter_options.aspect=t),items:e.listValRef.aspects,"item-title":"name","item-value":"id",density:"compact",filled:"",clearable:""},null,8,["modelValue","items"])])]),(0,i._)("div",ge,[(0,i._)("div",fe,[(0,i.Wm)(c,{color:"yellow",label:"Impact",modelValue:e.filter_options.impact,"onUpdate:modelValue":t[6]||(t[6]=t=>e.filter_options.impact=t),items:e.listValRef.impacts,"item-title":"name","item-value":"id",density:"compact",filled:"",clearable:""},null,8,["modelValue","items"])])]),(0,i._)("div",he,[(0,i._)("div",be,[(0,i.Wm)(c,{color:"yellow",label:"Thème",modelValue:e.filter_options.theme,"onUpdate:modelValue":t[7]||(t[7]=t=>e.filter_options.theme=t),items:e.listValRef.themes,"item-title":"name","item-value":"id",density:"compact",filled:"",clearable:""},null,8,["modelValue","items"])])]),(0,i._)("div",xe,[(0,i._)("div",ye,[(0,i.Wm)(_,{modelValue:e.filter_options.situation,"onUpdate:modelValue":t[9]||(t[9]=t=>e.filter_options.situation=t),inline:""},{label:(0,i.w5)((()=>[ke,e.filter_options.situation?((0,i.wg)(),(0,i.j4)(u,{key:0,size:"x-small",class:"ml-5",onClick:t[8]||(t[8]=t=>e.filter_options.situation=null)},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"mdi-close"})])),_:1})):(0,i.kq)("",!0)])),default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.listValRef.situations,(e=>((0,i.wg)(),(0,i.j4)(p,{class:(0,l.C_)([e.name.startsWith("U")?"btn bg-light btn-light-danger text-danger text-hover-white":e.name.startsWith("D")?"btn bg-light  btn-light-warning text-warning":"btn  bg-light  btn-light-secondary text-dark","btn btn-outline btn-outline-dashed p-1 pr-2 mx-1 fw-boldest"]),key:e.id,label:e.name,value:e.id},null,8,["class","label","value"])))),128))])),_:1},8,["modelValue"])])]),(0,i._)("div",We,[ze,(0,i.Wm)(w,{modelValue:e.filter_options.F_G,"onUpdate:modelValue":t[10]||(t[10]=t=>e.filter_options.F_G=t),step:1,max:100,"thumb-label":"always",color:"yellow"},null,8,["modelValue"])]),(0,i._)("div",Ve,[Ge,(0,i.Wm)(w,{modelValue:e.filter_options.impact_residuel,"onUpdate:modelValue":t[11]||(t[11]=t=>e.filter_options.impact_residuel=t),step:1,max:100,"thumb-label":"always",color:"green"},null,8,["modelValue"])]),(0,i._)("div",Ce,[Ee,e.filter_options.s_ns?((0,i.wg)(),(0,i.j4)(u,{key:0,size:"x-small",class:"ml-5",onClick:t[12]||(t[12]=t=>e.filter_options.s_ns=null)},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"mdi-close"})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(_,{modelValue:e.filter_options.s_ns,"onUpdate:modelValue":t[13]||(t[13]=t=>e.filter_options.s_ns=t),inline:""},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{label:"Significatif",value:"S"}),(0,i.Wm)(p,{label:"Non Significatif",value:"NS"})])),_:1},8,["modelValue"])]),(0,i._)("div",Ae,[(0,i._)("button",{onClick:t[14]||(t[14]=(...t)=>e.resetForm&&e.resetForm(...t)),type:"reset",class:"btn btn-sm btn-white btn-active-light-primary me-2","data-kt-menu-dismiss":"true"}," Rétablir "),(0,i._)("button",{onSubmit:t[15]||(t[15]=(...t)=>e.filter&&e.filter(...t)),type:"submit",class:"btn btn-sm btn-primary","data-kt-menu-dismiss":"true"}," Appliquer ",32)])])])),_:1})])),_:1})}var qe=a(9945),Fe=a(8433),Se=(0,i.aZ)({name:"filterAE2",props:{data_filter:{type:Array}},data:()=>({dates:["2019-09-10","2019-09-20"],listValRef:qe.Z,filter_options:{year:null,activite:null,service:null,zone:null,poste_travail:null,aspect:null,impact:null,theme:null,situation:null,F_G_MAX:null,F_G_MIN:null,F_G:[0,99],impact_residuel:[0,99],moyen_maitrise_humains:[],s_ns:null}}),components:{},computed:{currentRouteName(){return window.location.origin}},mounted(){this.fetch(),this.$emit("update:data_filter",this.filter_options)},methods:{resetForm(){this.filter_options={year:null,activite:null,service:null,zone:null,poste_travail:null,aspect:null,impact:null,theme:null,F_G_MAX:null,F_G_MIN:null,F_G:[0,99],impact_residuel:[0,99],situation:null,moyen_maitrise_humains:[],s_ns:null},this.$emit("update:data_filter",this.filter_options)},filter(){this.$emit("update:data_filter",this.filter_options)},async fetch(){const e=await Fe.Z.get(this.currentRouteName+"/api/valeur-ref");this.listValRef=e.data}},setup(){const e=(0,X.iH)({status:"1",author:!0,customer:!0,notifications:!0});return{data:e}}}),De=a(3744);const Pe=(0,De.Z)(Se,[["render",Ue]]);var $e=Pe,Re=a(7058),Ie=a(8542),Ne=a.n(Ie),Me=(0,i.aZ)({name:"analyse-env-list",components:{VDataTable:Q.y,FilterAE2:$e},data(){return{access:localStorage.getItem("access_token"),icon_expand:"expand",isExpanded:!0,data_filter:{},singleSelect:!1,selected:[],search:"",options:{pageCount:1},page:1,itemsPerPage:10,headerAE:[{title:"ID",key:"id",sortable:!0,class:"px-0",width:100},{title:"Processus",key:"processus",align:"start",value:"processus.name",sortable:!0,sort:(e,t)=>null==e?1:null===t||e.name<t.name?-1:e.name>t.name?1:0,width:150,expand:!0},{title:"Service",key:"service",align:"start",value:"service.name",sortable:!0,sort:(e,t)=>null==e?1:null===t||e.name<t.name?-1:e.name>t.name?1:0,width:150,expand:!0},{title:"Activité",key:"activite",value:"activite.name",sort:(e,t)=>null==e?1:null===t||e.name<t.name?-1:e.name>t.name?1:0,width:150,sortable:!0,expand:!0},{title:"Zone",key:"zone",align:"start",value:"zone.name",sortable:!0,sort:(e,t)=>null==e?1:null===t||e.name<t.name?-1:e.name>t.name?1:0,width:150,expand:!0},{title:"Poste de travail",key:"poste_travail",align:"start",value:"poste_travail.name",sortable:!0,sort:(e,t)=>null==e?1:null===t||e.name<t.name?-1:e.name>t.name?1:0,width:150,expand:!0},{title:"Processus / Service / Activité / Zone / Poste",key:"s_a_z_p",sortable:!0,width:300,expand:!1},{title:"Aspect",key:"aspect",value:"aspect.name",sort:(e,t)=>null==e?1:null===t||e.name<t.name?-1:e.name>t.name?1:0,width:150,sortable:!0,expand:!0},{title:"Impact",key:"impact",value:"impact.name",width:150,sortable:!0,sort:(e,t)=>null==e?1:null===t||e.name<t.name?-1:e.name>t.name?1:0,expand:!0},{title:"Thème",key:"theme",value:"theme.name",width:100,sortable:!0,sort:(e,t)=>null==e?1:null===t||e.name<t.name?-1:e.name>t.name?1:0,align:"center"},{title:"Situation (S, N, U )",key:"situation",value:"situation.name",sortable:!0,sort:(e,t)=>null==e?1:null===t||e.name<t.name?-1:e.name>t.name?1:0},{title:"Fréquence",key:"frequence",value:"frequence.description",width:70,sortable:!0,sort:(e,t)=>e.value-t.value},{title:"Gravité Étendu",key:"gravite_etendu",value:"gravite_etendu.description",sortable:!0,sort:(e,t)=>e.value-t.value,expand:!0},{title:"Gravité Dangerosité",key:"gravite_dangerosite",value:"gravite_dangerosite.description",sortable:!0,sort:(e,t)=>e.value-t.value,expand:!0},{title:"Gravité Persistance",key:"gravite_persistance",value:"gravite_persistance.description",sortable:!0,sort:(e,t)=>e.value-t.value,expand:!0},{title:"Gravité",key:"gravite",sort:"id",align:"center",sortable:!0,width:150,expand:!1},{title:"F*G",key:"F_G",sortable:!0},{title:"Significatif / NS",key:"s_ns",value:"s_ns",sortable:!0,align:"center",width:100},{title:"Moyen de Maitrîse Organisation",key:"moyen_maitrise_organisations",sortable:!0,width:150},{title:"Moyen de Maitrîse Technique",key:"moyen_maitrise_techniques",sortable:!0,width:150},{title:"Moyen de Maitrîse Humains",key:"moyen_maitrise_humains",sortable:!0,width:150},{title:"Niveau de Maitrîse",key:"niveau_maitrise",value:"niveau_maitrise.name",sortable:!0,sort:(e,t)=>e.niveau-t.niveau,width:150},{title:"Fréquence IES",key:"frequence_ir",value:"frequence_ir?.description",width:70,sortable:!0,sort:(e,t)=>e.value-t.value},{title:"Gravité Étendu IES",key:"gravite_etendu_ir",value:"gravite_etendu_ir?.description",sortable:!0,sort:(e,t)=>e.value-t.value,expand:!0},{title:"Gravité Dangerosité IES",key:"gravite_dangerosite_ir",value:"gravite_dangerosite_ir?.description",sortable:!0,sort:(e,t)=>e.value-t.value,expand:!0},{title:"Gravité Persistance IES",key:"gravite_persistance_ir",value:"gravite_persistance_ir?.description",sortable:!0,sort:(e,t)=>e.value-t.value,expand:!0},{title:"Gravité IES",key:"gravite_ir",align:"center",sortable:!0,width:150,expand:!1},{title:"Impact Résiduel",key:"impact_residuel",sortable:!0},{title:"Niveau de Priorité",key:"niveau_priorite",value:"niveau_priorite.name",sort:(e,t)=>e.name<t.name?-1:e.name>t.name?1:0,sortable:!0,width:150},{title:"Actions",key:"actions",width:170}],dataAE:te,initialData:te}},watch:{data_filter:{handler(e){this.dataAE=this.initialData.filter((t=>(!e.year||Number(new Date(t.delai).getFullYear())==e.year)&&(!e.service||t.service.id===e.service)&&(!e.zone||t.zone.id===e.zone)&&(!e.poste_travail||t.poste_travail.id===e.poste_travail)&&(!e.activite||t.activite.id===e.activite)&&(!e.impact||t.impact.id===e.impact)&&(!e.aspect||t.aspect.id===e.aspect)&&(!e.theme||t.theme.id===e.theme)&&(!e.situation||t.situation.id===e.situation)&&(!e.F_G||t.F_G<=e.F_G[1])&&(!e.F_G||t.F_G>=e.F_G[0])&&(!e.impact_residuel||t.impact_residuel<=e.impact_residuel[1])&&(!e.ir||t.impact_residuel>=e.impact_residuel[0])&&(!e.s_ns||"S"===e.s_ns&&t.F_G>=20||"NS"===e.s_ns&&t.F_G<20)))},deep:!0}},computed:{visibleHeaders(){return this.headerAE.filter((e=>e.expand!==this.isExpanded))},currentRouteName(){return window.location.origin},pageCount(){return Math.ceil(this.dataAE.length/this.itemsPerPage)},pageItems(){const e=(this.page-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.dataAE.slice(e,t)}},setup(){(0,X.iH)(300);(0,i.bv)((()=>{(0,J.M)("AEs Listing",["Analyse environnementale"])}))},mounted(){this.fetch()},methods:{exportToExcel(){(0,Re.G)(this.dataAE,"Analyse Environnementale")},async fetch(){const e=await Fe.Z.get(this.currentRouteName+"/api/analyse");this.dataAE=e.data,this.initialData=e.data},toggleColumn(){this.isExpanded=!this.isExpanded,this.icon_expand=this.isExpanded?"expand":"collapse"},setpage(e){this.page=e},previousPage(){this.page>1&&this.page--},nextPage(){this.page<this.pageCount&&this.page++},editItem(e){console.log("Edit Item: ",e)},async deleteItem(e){const t=e.raw.id,a=await Ne().fire({title:"Êtes-vous sûr(e) ?",text:"Cette action ne peut pas être annulée",icon:"warning",showCancelButton:!0,confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler",customClass:{confirmButton:"btn fw-bold btn-light-danger",cancelButton:"btn fw-bold btn-light-primary"}});if(a.isConfirmed){await Fe.Z["delete"](this.currentRouteName+"/api/analyse/"+t).then((e=>{Ne().fire({text:"Analyse environnementale supprimée avec succès",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn fw-bold btn-light-danger"}})})).catch((function(e){Ne().fire({text:e,icon:"error",buttonsStyling:!1,confirmButtonText:"Réessayer!",customClass:{confirmButton:"btn fw-bold btn-light-danger"}})}));const e=this.dataAE.findIndex((e=>e.id===t));-1!==e&&this.dataAE.splice(e,1)}},setRowStyle(e){return"style-1"},changeWidth(e){const t=e.target.parentNode;t.classList.contains("max-width-cell")?(console.log(t),t.classList.remove("max-width-cell")):(console.log(t),t.classList.add("max-width-cell"))},mouseDownHandler(e){console.log(e)}}});const Ze=(0,De.Z)(Me,[["render",O]]);var He=Ze}}]);
//# sourceMappingURL=579.e81fbaf8.js.map