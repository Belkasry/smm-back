"use strict";(self["webpackChunkdemo1"]=self["webpackChunkdemo1"]||[]).push([[8007],{8932:function(e,t,a){a.d(t,{M:function(){return l},V:function(){return r}});var i=a(6450),s=a(5758);const l=(e,t)=>{i.Z.dispatch(s.e.SET_BREADCRUMB_ACTION,{title:e,pageBreadcrumbPath:t})},r=e=>{i.Z.dispatch(s.e.SET_BREADCRUMB_ACTION,{title:e})}},5886:function(e,t,a){a.d(t,{Z:function(){return M}});var i=a(6252),s=a(3577);const l={class:"card-body d-flex flex-column"},r={class:"row"},n={class:"col-3 mr-4 d-flex flex-md-column bg-light bg-opacity-5 active rounded border border-primary center-widget"},o=(0,i._)("a",{href:"#",class:"text-white text-hover-primary fw-bolder fs-3 center-widget"},"Impact Résiduel",-1),d=(0,i._)("span",{class:"pulse-ring border-9"},null,-1),c={class:"row col-4 ml-3"},m={class:"col-5 d-flex bg-light bg-opacity-5 mb-2 mx-2 border border-primary"},u={class:"d-flex mb-9 me-2 p-3"},_=(0,i._)("div",{class:"fs-5 text-white fw-bolder lh-1"},"Fréquence",-1),p={class:"fs-8 text-white"},f={class:"col-5 d-flex bg-light bg-opacity-5 mb-2 border border-primary"},v={class:"d-flex mb-9 me-2 p-3"},g=(0,i._)("div",{class:"fs-4 text-white fw-bolder lh-1"},"Étendu",-1),b={class:"fs-8 text-white"},h={class:"col-5 d-flex bg-light bg-opacity-5 mx-2 border border-primary"},w={class:"d-flex mb-9 me-2 p-3"},x=(0,i._)("div",{class:"fs-5 text-white fw-bolder lh-1"},"Persistance",-1),y={class:"fs-8 text-white"},V={class:"col-5 d-flex bg-light bg-opacity-5 border border-primary"},k={class:"d-flex mb-9 me-2 p-3"},W=(0,i._)("div",{class:"fs-5 text-white fw-bolder lh-1"},"Dangerosité",-1),R={class:"fs-8 text-white mt"},z={class:"col-4 d-flex bg-light bg-opacity-5 active rounded border border-primary"},U={class:"d-flex flex-stack flex-grow-1"},q={class:"fw-bold"},C={class:"fs-5 text-white"},j={href:"#",class:"me-1 fs-2"};function D(e,t,a,D,B,S){return e.data&&e.listValRef?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)(e.widgetClasses),style:(0,s.j5)(`background-color: ${e.widgetColor}`)},[(0,i._)("div",l,[(0,i._)("div",r,[(0,i._)("div",n,[o,(0,i._)("a",{href:"#",class:(0,s.C_)(["btn btn-icon btn-lg btn-block pulse","pulse-"+e.iae_color])},[(0,i._)("span",{class:(0,s.C_)("fs-2 text-"+e.iae_color)},(0,s.zw)(e.ies?e.ies:0),3),d],2)]),(0,i._)("div",c,[(0,i._)("div",m,[(0,i._)("div",u,[(0,i._)("div",null,[_,(0,i._)("div",p,(0,s.zw)(e.data.frequence_ir?.description),1)])])]),(0,i._)("div",f,[(0,i._)("div",v,[(0,i._)("div",null,[g,(0,i._)("div",b,(0,s.zw)(e.data.gravite_etendu_ir?.description),1)])])]),(0,i._)("div",h,[(0,i._)("div",w,[(0,i._)("div",null,[x,(0,i._)("div",y,(0,s.zw)(e.data.gravite_persistance_ir?.description),1)])])]),(0,i._)("div",V,[(0,i._)("div",k,[(0,i._)("div",null,[W,(0,i._)("div",R,(0,s.zw)(e.data.gravite_dangerosite_ir?.description),1)])])])]),(0,i._)("div",z,[(0,i._)("div",U,[(0,i._)("div",q,[(0,i._)("div",C,[(0,i._)("p",null,[(0,i._)("a",j,(0,s.zw)(e.niveau?.name),1),(0,i.Uk)(" : "+(0,s.zw)(e.niveau?.action),1)])])])])])])])],6)):(0,i.kq)("",!0)}var B=(0,i.aZ)({name:"widget-14",props:{widgetClasses:String,widgetColor:String,data:Object,listValRef:Object},data(){return{}},computed:{ies(){return this.data?this.data.frequence_ir?.value*(this.data.gravite_dangerosite_ir?.value+this.data.gravite_persistance_ir?.value+this.data.gravite_etendu_ir?.value):0},iae_color(){return this.ies>20?"danger":this.ies>10&&this.ies<=20?"warning":"info"},niveau(){if(this.listValRef){if(this.ies>=0&&this.ies<=10)return this.listValRef.niveau_priorites[2];if(this.ies>10&&this.ies<=20)return this.listValRef.niveau_priorites[1];if(this.ies>20)return this.listValRef.niveau_priorites[0]}return{name:"",action:""}}}}),S=a(3744);const A=(0,S.Z)(B,[["render",D]]);var M=A},2567:function(e,t,a){a.d(t,{Z:function(){return Z}});var i=a(6252),s=a(3577);const l={class:"card-header border-0 pt-5"},r={class:"card-title align-items-start flex-column"},n=(0,i._)("span",{class:"text-primary card-label fw-bolder fs-3 mb-1"},"Plan d'action",-1),o={class:"text-muted mt-1 fw-bold fs-7"},d={class:"card-toolbar","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"Click to add a user"},c={class:"svg-icon svg-icon-2"},m={class:"card-body py-3"},u={class:"table-responsive"},_={class:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4"},p=(0,i._)("thead",null,[(0,i._)("tr",{class:"fw-bolder text-primary"},[(0,i._)("th",{class:"min-w-150px"},"Nom"),(0,i._)("th",{class:"min-w-140px"},"Délai"),(0,i._)("th",{class:"min-w-120px"},"Progres"),(0,i._)("th",{class:"min-w-100px text-end"},"Actions")])],-1),f={class:"d-flex align-items-center"},v={class:"d-flex justify-content-start flex-column"},g={href:"#",class:"text-white fw-bolder text-hover-primary fs-6"},b={class:"text-muted fw-bold text-muted d-block fs-7"},h={class:"text-end"},w={class:"d-flex flex-column w-100 me-2"},x={class:"d-flex flex-stack mb-2"},y={class:"text-muted me-2 fs-7 fw-bold"},V={class:"progress h-6px w-100"},k=["aria-valuenow"],W={class:"text-end"},R={href:"#",class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1"},z={class:"svg-icon svg-icon-3"},U={class:"svg-icon svg-icon-3 text-white"},q={class:"svg-icon svg-icon-3 text-white"};function C(e,t,a,C,j,D){const B=(0,i.up)("inline-svg"),S=(0,i.up)("router-link"),A=(0,i.up)("v-btn");return e.list?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)(["card bg-theme-widget",e.widgetClasses])},[(0,i._)("div",l,[(0,i._)("h3",r,[n,(0,i._)("span",o,(0,s.zw)(e.list.length)+" plans",1)]),(0,i._)("div",d,[(0,i.Wm)(S,{to:"/apps/analyse/add-action-analyse/"+e.$route.params.id,class:"btn btn-sm btn-primary btn-hover-secondary text-hover-dark me-3"},{default:(0,i.w5)((()=>[(0,i._)("span",c,[(0,i.Wm)(B,{src:"media/icons/duotune/arrows/arr075.svg"})]),(0,i.Uk)(" Ajouter un Plan d'action ")])),_:1},8,["to"])])]),(0,i._)("div",m,[(0,i._)("div",u,[(0,i._)("table",_,[p,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.list,((t,a)=>((0,i.wg)(),(0,i.iD)("tr",{key:a},[(0,i._)("td",null,[(0,i._)("div",f,[(0,i._)("div",v,[(0,i._)("a",g,(0,s.zw)(t.name),1)])])]),(0,i._)("td",null,[(0,i._)("span",b,(0,s.zw)(t.delai),1)]),(0,i._)("td",h,[(0,i._)("div",w,[(0,i._)("div",x,[(0,i._)("span",y,(0,s.zw)(t.progress)+"% ",1)]),(0,i._)("div",V,[(0,i._)("div",{class:(0,s.C_)(["progress-bar",t.progress<30?"bg-info":t.progress<60?"bg-primary":"bg-success"]),role:"progressbar",style:(0,s.j5)({width:t.progress+"%"}),"aria-valuenow":t.progress,"aria-valuemin":"0","aria-valuemax":"100"},null,14,k)])])]),(0,i._)("td",W,[(0,i._)("a",R,[(0,i._)("span",z,[(0,i.Wm)(B,{src:"media/icons/duotune/general/gen019.svg"})])]),(0,i.Wm)(S,{to:"/apps/analyse/edit-action-analyse/"+t.id,class:"btn btn-icon btn-bg-warning btn-active-color-primary btn-sm me-1"},{default:(0,i.w5)((()=>[(0,i._)("span",U,[(0,i.Wm)(B,{src:"media/icons/duotune/art/art005.svg"})])])),_:2},1032,["to"]),(0,i.Wm)(A,{onClick:a=>e.deleteItem(t),size:"x-small",class:"btn btn-icon btn-bg-danger btn-active-color-dark py-4"},{default:(0,i.w5)((()=>[(0,i._)("span",q,[(0,i.Wm)(B,{src:"media/icons/duotune/general/gen027.svg"})])])),_:2},1032,["onClick"])])])))),128))])])])])],2)):(0,i.kq)("",!0)}var j=a(2262),D=a(8433),B=a(8542),S=a.n(B),A=(0,i.aZ)({name:"kt-widget-plan",components:{},props:{widgetClasses:String,list:{required:!0,writable:!0,default:[{id:0}]}},data(){return{list_plan:this.list}},computed:{currentRouteName(){return window.location.origin}},methods:{async deleteItem(e){const t=e.id,a=await S().fire({title:"Êtes-vous sûr(e) ?",text:"Cette action ne peut pas être annulée",icon:"warning",showCancelButton:!0,confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler",customClass:{confirmButton:"btn fw-bold btn-light-danger",cancelButton:"btn fw-bold btn-light-primary"}});if(a.isConfirmed){await D.Z["delete"](this.currentRouteName+"/api/action/"+t).then((e=>{S().fire({text:"Plan d'action supprimé avec succès",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn fw-bold btn-light-danger"}})})).catch((function(e){S().fire({text:e,icon:"error",buttonsStyling:!1,confirmButtonText:"Réessayer!",customClass:{confirmButton:"btn fw-bold btn-light-danger"}})}));const e=this.list.findIndex((e=>e.id===t));-1!==e&&this.list.splice(e,1)}}},setup(){const e=(0,j.iH)([]);return{checkedRows:e}}}),M=a(3744);const T=(0,M.Z)(A,[["render",C]]);var Z=T},8007:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ye}});var i=a(6252),s=a(9963),l=a(3577);const r={class:"card mb-5 mb-xl-10 bg-theme-smm"},n={class:"card-body"},o={class:"card-header mb-2 px-0 cursor-pointer",role:"button","data-bs-toggle":"collapse","data-bs-target":"#kt_form1","aria-expanded":"true","aria-controls":"kt_form1"},d={class:"card-title"},c={class:"d-flex align-items-center"},m=(0,i._)("div",{class:"ml-2 flex-grow-1"},[(0,i._)("h2",{class:"text-white text-hover-primary fw-bolder"}," Informations Générales ")],-1),u={id:"kt_form1",class:"collapse show"},_={class:"w-100"},p={id:"kt_account_profile_details container",class:"collapse show"},f={class:"text-white fw-bold fs-2"},v={class:"d-flex flex-wrap"},g={class:"card-header mb-2 px-0 cursor-pointer",role:"button","data-bs-toggle":"collapse","data-bs-target":"#kt_form2","aria-expanded":"true","aria-controls":"kt_form2"},b={class:"card-title"},h={class:"d-flex align-items-center"},w=(0,i._)("div",{class:"ml-2 flex-grow-1"},[(0,i._)("h2",{class:"text-white text-hover-primary fw-bolder"}," Description Général ")],-1),x={id:"kt_form2",class:"collapse show"},y={class:"w-100"},V={id:"kt_description_details container",class:"collapse show"},k={class:"text-white fw-bold fs-7"},W={class:"d-flex flex-wrap"},R={class:"d-flex flex-wrap"},z={class:"bg-light bg-opacity-5 active p-5 mt-4 mb-7 stretch-block"},U=(0,i._)("div",null,[(0,i._)("strong",null,"Situation")],-1),q={class:"bg-light bg-opacity-5 active p-5 mt-4 mb-7 d-flex flex-column stretch-block"},C=(0,i._)("strong",null,"Fréquence:",-1),j={class:"mt-2"},D={class:"bg-light bg-opacity-5 active p-5 mt-4 mb-7 d-flex flex-column stretch-block"},B=(0,i._)("strong",null,"Gravité entendu:",-1),S={class:"mt-2"},A={class:"bg-light bg-opacity-5 active p-5 mt-4 mb-7 d-flex flex-column stretch-block"},M=(0,i._)("strong",null,"Gravité persistance:",-1),T={class:"mt-2"},Z={class:"bg-light bg-opacity-5 active p-5 mt-4 mb-7 d-flex flex-column stretch-block"},G=(0,i._)("strong",null,"Gravité dangerosite:",-1),P={class:"mt-2 text-muted fs-7"},H={class:"bg-light bg-opacity-5 active rounded border border-dashed d-flex rounded mt-4 mb-7 stretch-block"},I={class:"m-auto"},N={class:"svg-icon svg-icon-1 mr-2"},O={href:"#",class:"fw-bolder text-white text-hover-primary fs-2 ml-2"},$={class:"text-muted fw-bold text-warning`"},K={class:"card-header mb-2 px-0 cursor-pointer",role:"button","data-bs-toggle":"collapse","data-bs-target":"#kt_form3","aria-expanded":"true","aria-controls":"kt_form3"},Y={class:"card-title"},E={class:"d-flex align-items-center"},F=(0,i._)("div",{class:"ml-2 flex-grow-1"},[(0,i._)("h2",{class:"text-white text-hover-primary fw-bolder"}," Maîtrise ")],-1),J={id:"kt_form3",class:"collapse show"},L={class:"w-100"},Q={id:"kt_description_details container",class:"collapse show"},X={class:"text-white fw-bold fs-7"},ee={class:"d-flex flex-wrap"},te={class:"d-flex bg-light bg-opacity-5 active rounded border border-dashed mb-9 p-6"},ae={class:"svg-icon svg-icon-2tx svg-icon-light me-4"},ie={class:"d-flex flex-stack flex-grow-1"},se={class:"fw-bold"},le={class:"fs-5 text-white"},re={href:"#",class:"me-1 fs-4"},ne={class:"card-header mb-2 px-0 cursor-pointer",role:"button","data-bs-toggle":"collapse","data-bs-target":"#kt_form4","aria-expanded":"true","aria-controls":"kt_form4"},oe={class:"card-title"},de={class:"d-flex align-items-center"},ce=(0,i._)("div",{class:"ml-2 flex-grow-1"},[(0,i._)("h2",{class:"text-white text-hover-primary fw-bolder"}," Impact Résiduel ")],-1),me={id:"kt_form4",class:"collapse show"},ue={class:"w-100"},_e={id:"kt_plan_action container",class:"collapse show"},pe={class:"text-white fw-bold fs-7"},fe={class:"d-flex flex-wrap"},ve={class:"bg-light bg-opacity-5 active p-5 mt-4 mb-7 d-flex flex-column stretch-block"},ge=(0,i._)("strong",null,"Fréquence:",-1),be={class:"mt-2"},he={class:"bg-light bg-opacity-5 active p-5 mt-4 mb-7 d-flex flex-column stretch-block"},we=(0,i._)("strong",null,"Gravité entendu:",-1),xe={class:"mt-2"},ye={class:"bg-light bg-opacity-5 active p-5 mt-4 mb-7 d-flex flex-column stretch-block"},Ve=(0,i._)("strong",null,"Gravité Persistance_ir:",-1),ke={class:"mt-2"},We={class:"bg-light bg-opacity-5 active p-5 mt-4 mb-7 d-flex flex-column stretch-block"},Re=(0,i._)("strong",null,"Gravité dangerosite_ir:",-1),ze={class:"mt-2 text-muted fs-7"},Ue={class:"card-footer d-flex justify-content-end py-6 px-9"},qe=(0,i._)("button",{type:"reset",class:"btn btn-white btn-active-light-primary me-2"}," Annuler ",-1),Ce=(0,i._)("span",{class:"indicator-label"}," Modifier ",-1),je=(0,i._)("span",{class:"indicator-progress"},[(0,i.Uk)(" Please wait... "),(0,i._)("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),De=[Ce,je],Be=(0,i._)("span",{class:"indicator-label"}," Sauvegarder ",-1),Se=(0,i._)("span",{class:"indicator-progress"},[(0,i.Uk)(" Please wait... "),(0,i._)("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),Ae=[Be,Se];function Me(e,t,a,Ce,je,Be){const Se=(0,i.up)("v-autocomplete"),Me=(0,i.up)("v-col"),Te=(0,i.up)("v-text-field"),Ze=(0,i.up)("v-card"),Ge=(0,i.up)("v-radio"),Pe=(0,i.up)("v-radio-group"),He=(0,i.up)("v-label"),Ie=(0,i.up)("v-btn"),Ne=(0,i.up)("v-btn-toggle"),Oe=(0,i.up)("v-icon"),$e=(0,i.up)("inline-svg"),Ke=(0,i.up)("v-slider"),Ye=(0,i.up)("MixedWidget14"),Ee=(0,i.up)("TableWidgetPlan"),Fe=(0,i.up)("v-form");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(Fe,{"validate-on":"submit","lazy-validation":!0,onSubmit:(0,s.iM)(e.saveData,["prevent"])},{default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i.Wm)(Ze,{class:"my-4"},{default:(0,i.w5)((()=>[(0,i._)("div",o,[(0,i._)("div",d,[(0,i._)("div",c,[(0,i._)("span",{class:(0,l.C_)(["bullet bullet-vertical h-50px","bg-yellow-smm"])}),m])])]),(0,i._)("div",u,[(0,i._)("div",_,[(0,i._)("div",p,[(0,i._)("div",f,[(0,i._)("div",v,[(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Se,{clearable:"",color:"yellow",class:"fs-9",label:"Processus",modelValue:e.data.processus,"onUpdate:modelValue":t[0]||(t[0]=t=>e.data.processus=t),items:e.listValRef.processuses,"item-title":"name",density:"compact","return-object":"",required:""},null,8,["modelValue","items"])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Se,{clearable:"",color:"yellow",class:"fs-9",label:"Service",modelValue:e.data.service,"onUpdate:modelValue":t[1]||(t[1]=t=>e.data.service=t),items:e.services,"item-title":"name",density:"compact","return-object":"",required:""},null,8,["modelValue","items"])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Se,{clearable:"",color:"yellow",label:"Activité",density:"compact",modelValue:e.data.activite,"onUpdate:modelValue":t[2]||(t[2]=t=>e.data.activite=t),items:e.activites,"item-title":"name","return-object":""},null,8,["modelValue","items"])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Se,{clearable:"",color:"yellow",label:"Zone",density:"compact",modelValue:e.data.zone,"onUpdate:modelValue":t[3]||(t[3]=t=>e.data.zone=t),items:e.zones,"item-title":"name","return-object":""},null,8,["modelValue","items"])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Se,{clearable:"",color:"yellow",label:"Poste de travail",density:"compact",modelValue:e.data.poste_travail,"onUpdate:modelValue":t[4]||(t[4]=t=>e.data.poste_travail=t),items:e.poste_travails,"item-title":"name","return-object":""},null,8,["modelValue","items"])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Te,{type:"date",density:"compact",modelValue:e.data.delai,"onUpdate:modelValue":t[5]||(t[5]=t=>e.data.delai=t),label:"Date"},null,8,["modelValue"])])),_:1})])])])])])])),_:1}),(0,i.Wm)(Ze,{class:"my-4"},{default:(0,i.w5)((()=>[(0,i._)("div",g,[(0,i._)("div",b,[(0,i._)("div",h,[(0,i._)("span",{class:(0,l.C_)(["bullet bullet-vertical h-50px","bg-yellow-smm"])}),w])])]),(0,i._)("div",x,[(0,i._)("div",y,[(0,i._)("div",V,[(0,i._)("div",k,[(0,i._)("div",W,[(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Se,{clearable:"",color:"yellow",class:"fs-9",label:"Aspect",modelValue:e.data.aspect,"onUpdate:modelValue":t[6]||(t[6]=t=>e.data.aspect=t),items:e.listValRef.aspects,"item-title":"name",density:"compact","return-object":""},null,8,["modelValue","items"])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Se,{clearable:"",color:"yellow",class:"fs-9",label:"Impacts",modelValue:e.data.impact,"onUpdate:modelValue":t[7]||(t[7]=t=>e.data.impact=t),items:e.listValRef.impacts,"item-title":"name",density:"compact","return-object":""},null,8,["modelValue","items"])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Se,{clearable:"",color:"yellow",class:"fs-9",label:"Thème",modelValue:e.data.theme,"onUpdate:modelValue":t[8]||(t[8]=t=>e.data.theme=t),items:e.listValRef.themes,"item-title":"name",density:"compact","return-object":""},null,8,["modelValue","items"])])),_:1})]),(0,i._)("div",R,[(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4",class:"d-flex"},{default:(0,i.w5)((()=>[(0,i._)("div",z,[(0,i.Wm)(Pe,{modelValue:e.data.situation,"onUpdate:modelValue":t[9]||(t[9]=t=>e.data.situation=t),inline:""},{label:(0,i.w5)((()=>[U])),default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.listValRef.situations,(e=>((0,i.wg)(),(0,i.j4)(Ge,{class:(0,l.C_)(["U"==e.name?"radio-danger":"D"==e.name?"radio-warning":"radio-info","radio radio-outline"]),key:e.id,label:e.name,value:e},{label:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("strong",{class:(0,l.C_)(["fs-3","U"==e.name?"text-danger":"D"==e.name?"text-warning":"text-info"])},(0,l.zw)(e.name),3)])])),_:2},1032,["class","label","value"])))),128))])),_:1},8,["modelValue"]),e.data.situation?((0,i.wg)(),(0,i.iD)("span",{key:0,class:(0,l.C_)("U"==e.data.situation.name?"text-danger":"D"==e.data.situation.name?"text-warning":"text-info")},(0,l.zw)(e.data.situation.name)+" Signification ",3)):(0,i.kq)("",!0)])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4",class:"d-flex"},{default:(0,i.w5)((()=>[(0,i._)("div",q,[(0,i.Wm)(He,{class:"mb-3"},{default:(0,i.w5)((()=>[C])),_:1}),(0,i.Wm)(Ne,{class:"mx-auto",label:"Frequence",modelValue:e.data.frequence,"onUpdate:modelValue":t[10]||(t[10]=t=>e.data.frequence=t),color:"deep-purple-accent-3",group:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.listValRef.frequences,(e=>((0,i.wg)(),(0,i.j4)(Ie,{key:e.id,value:e,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.value),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,i._)("span",j,[(0,i.Wm)(Oe,{icon:"mdi-information-outline"}),(0,i.Uk)(" "+(0,l.zw)(e.data.frequence?.description),1)])])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4",class:"d-flex"},{default:(0,i.w5)((()=>[(0,i._)("div",D,[(0,i.Wm)(He,{class:"mb-3"},{default:(0,i.w5)((()=>[B])),_:1}),(0,i.Wm)(Ne,{class:"mx-auto",label:"Gravite_etendu",modelValue:e.data.gravite_etendu,"onUpdate:modelValue":t[11]||(t[11]=t=>e.data.gravite_etendu=t),color:"deep-purple-accent-3",group:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.listValRef.gravite_etendus,(e=>((0,i.wg)(),(0,i.j4)(Ie,{key:e.id,value:e,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.value),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,i._)("span",S,[(0,i.Wm)(Oe,{icon:"mdi-information-outline"}),(0,i.Uk)(" "+(0,l.zw)(e.data.gravite_etendu?.description),1)])])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4",class:"d-flex"},{default:(0,i.w5)((()=>[(0,i._)("div",A,[(0,i.Wm)(He,{class:"mb-3"},{default:(0,i.w5)((()=>[M])),_:1}),(0,i.Wm)(Ne,{class:"mx-auto",label:"Gravite_persistance",modelValue:e.data.gravite_persistance,"onUpdate:modelValue":t[12]||(t[12]=t=>e.data.gravite_persistance=t),color:"deep-purple-accent-3",group:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.listValRef.gravite_persistances,(e=>((0,i.wg)(),(0,i.j4)(Ie,{key:e.id,value:e,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.value),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,i._)("span",T,[(0,i.Wm)(Oe,{icon:"mdi-information-outline"}),(0,i.Uk)(" "+(0,l.zw)(e.data.gravite_persistance?.description),1)])])])),_:1}),e.data.theme?((0,i.wg)(),(0,i.j4)(Me,{key:0,cols:"12",sm:"6",md:"4",class:"d-flex"},{default:(0,i.w5)((()=>[(0,i._)("div",Z,[(0,i.Wm)(He,{class:"mb-3"},{default:(0,i.w5)((()=>[G])),_:1}),(0,i.Wm)(Ne,{class:"mx-auto",label:"Gravite_dangerosite",modelValue:e.data.gravite_dangerosite,"onUpdate:modelValue":t[13]||(t[13]=t=>e.data.gravite_dangerosite=t),color:"deep-purple-accent-3",group:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.gravite_dangerosites,(e=>((0,i.wg)(),(0,i.j4)(Ie,{key:e.id,value:e,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.value),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,i._)("span",P,[(0,i.Wm)(Oe,{icon:"mdi-information-outline"}),(0,i.Uk)(" "+(0,l.zw)(e.data.gravite_dangerosite?.description),1)])])])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(Me,{class:"d-flex",cols:"12",sm:"6",md:"4",set:e.f_g=e.data.frequence?.value*(e.data.gravite_dangerosite?.value+e.data.gravite_persistance?.value+e.data.gravite_etendu?.value)},{default:(0,i.w5)((()=>[(0,i._)("div",H,[(0,i._)("div",I,[(0,i._)("span",N,[(0,i.Wm)($e,{src:"media/icons/duotune/abstract/abs027.svg"})]),(0,i._)("a",O,[(0,i.Uk)("F * G = "),(0,i._)("span",$,(0,l.zw)(e.f_g),1)])])])])),_:1},8,["set"])])])])])])])),_:1}),(0,i.Wm)(Ze,{class:"my-4"},{default:(0,i.w5)((()=>[(0,i._)("div",K,[(0,i._)("div",Y,[(0,i._)("div",E,[(0,i._)("span",{class:(0,l.C_)(["bullet bullet-vertical h-50px","bg-yellow-smm"])}),F])])]),(0,i._)("div",J,[(0,i._)("div",L,[(0,i._)("div",Q,[(0,i._)("div",X,[(0,i._)("div",ee,[(0,i.Wm)(Me,{cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ke,{color:"yellow","track-color":"white",class:"mt-4",label:"Niveau de maîtrise",modelValue:e.niveau_m,"onUpdate:modelValue":t[14]||(t[14]=t=>e.niveau_m=t),ticks:e.listValRef.niveau_maitrises,"thumb-label":"always",step:"1",max:e.listValRef.niveau_maitrises.length-1,"tick-size":e.listValRef.niveau_maitrises.length},null,8,["modelValue","ticks","max","tick-size"])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",te,[(0,i._)("span",ae,[(0,i.Wm)($e,{src:"/media/icons/duotune/abstract/abs021.svg"})]),(0,i._)("div",ie,[(0,i._)("div",se,[(0,i._)("div",le,[(0,i._)("p",null,[(0,i._)("a",re,(0,l.zw)(e.listValRef.niveau_maitrises[e.niveau_m]?.niveau),1),(0,i.Uk)(" : "+(0,l.zw)(e.listValRef.niveau_maitrises[e.niveau_m]?.name),1)])])])])])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Se,{clearable:"",color:"yellow",chips:"",label:"Moyens de Maîtrise Humain",density:"compact",modelValue:e.data.moyen_maitrise_humains,"onUpdate:modelValue":t[15]||(t[15]=t=>e.data.moyen_maitrise_humains=t),items:e.listValRef.moyen_maitrise_humains,"item-title":"name","return-object":"",multiple:""},null,8,["modelValue","items"])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Se,{clearable:"",color:"yellow",chips:"",label:"Moyens de Maîtrise Technique",density:"compact",modelValue:e.data.moyen_maitrise_techniques,"onUpdate:modelValue":t[16]||(t[16]=t=>e.data.moyen_maitrise_techniques=t),items:e.listValRef.moyen_maitrise_techniques,"item-title":"name","return-object":"",multiple:""},null,8,["modelValue","items"])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"6",md:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Se,{clearable:"",color:"yellow",chips:"",label:"Moyens de Maîtrise Organisation",density:"compact",modelValue:e.data.moyen_maitrise_organisations,"onUpdate:modelValue":t[17]||(t[17]=t=>e.data.moyen_maitrise_organisations=t),items:e.listValRef.moyen_maitrise_organisations,"item-title":"name","return-object":"",multiple:""},null,8,["modelValue","items"])])),_:1})])])])])])])),_:1}),(0,i.Wm)(Ze,{class:"my-4"},{default:(0,i.w5)((()=>[(0,i._)("div",ne,[(0,i._)("div",oe,[(0,i._)("div",de,[(0,i._)("span",{class:(0,l.C_)(["bullet bullet-vertical h-50px","bg-yellow-smm"])}),ce])])]),(0,i._)("div",me,[(0,i._)("div",ue,[(0,i._)("div",_e,[(0,i._)("div",pe,[(0,i._)("div",fe,[(0,i.Wm)(Me,{cols:"12",sm:"12",md:"3",class:"d-flex"},{default:(0,i.w5)((()=>[(0,i._)("div",ve,[(0,i.Wm)(He,{class:"mb-3"},{default:(0,i.w5)((()=>[ge])),_:1}),(0,i.Wm)(Ne,{class:"mx-auto",label:"Frequence_ir",modelValue:e.data.frequence_ir,"onUpdate:modelValue":t[18]||(t[18]=t=>e.data.frequence_ir=t),color:"deep-purple-accent-3",group:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.listValRef.frequences,(e=>((0,i.wg)(),(0,i.j4)(Ie,{key:e.id,value:e,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.value),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,i._)("span",be,[(0,i.Wm)(Oe,{icon:"mdi-information-outline"}),(0,i.Uk)(" "+(0,l.zw)(e.data.frequence_ir?.description),1)])])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"12",md:"3",class:"d-flex"},{default:(0,i.w5)((()=>[(0,i._)("div",he,[(0,i.Wm)(He,{class:"mb-3"},{default:(0,i.w5)((()=>[we])),_:1}),(0,i.Wm)(Ne,{class:"mx-auto",label:"Gravite_etendu_ir",modelValue:e.data.gravite_etendu_ir,"onUpdate:modelValue":t[19]||(t[19]=t=>e.data.gravite_etendu_ir=t),color:"deep-purple-accent-3",group:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.listValRef.gravite_etendus,(e=>((0,i.wg)(),(0,i.j4)(Ie,{key:e.id,value:e,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.value),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,i._)("span",xe,[(0,i.Wm)(Oe,{icon:"mdi-information-outline"}),(0,i.Uk)(" "+(0,l.zw)(e.data.gravite_etendu_ir?.description),1)])])])),_:1}),(0,i.Wm)(Me,{cols:"12",sm:"12",md:"3",class:"d-flex"},{default:(0,i.w5)((()=>[(0,i._)("div",ye,[(0,i.Wm)(He,{class:"mb-3"},{default:(0,i.w5)((()=>[Ve])),_:1}),(0,i.Wm)(Ne,{class:"mx-auto",label:"Gravite_persistance_ir",modelValue:e.data.gravite_persistance_ir,"onUpdate:modelValue":t[20]||(t[20]=t=>e.data.gravite_persistance_ir=t),color:"deep-purple-accent-3",group:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.listValRef.gravite_persistances,(e=>((0,i.wg)(),(0,i.j4)(Ie,{key:e.id,value:e,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.value),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,i._)("span",ke,[(0,i.Wm)(Oe,{icon:"mdi-information-outline"}),(0,i.Uk)(" "+(0,l.zw)(e.data.gravite_persistance_ir?.description),1)])])])),_:1}),e.data.theme?((0,i.wg)(),(0,i.j4)(Me,{key:0,cols:"12",sm:"6",md:"3",class:"d-flex"},{default:(0,i.w5)((()=>[(0,i._)("div",We,[(0,i.Wm)(He,{class:"mb-3"},{default:(0,i.w5)((()=>[Re])),_:1}),(0,i.Wm)(Ne,{class:"mx-auto",label:"Gravite dangérosite ir",modelValue:e.data.gravite_dangerosite_ir,"onUpdate:modelValue":t[21]||(t[21]=t=>e.data.gravite_dangerosite_ir=t),color:"deep-purple-accent-3",group:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.gravite_dangerosite_irs,(e=>((0,i.wg)(),(0,i.j4)(Ie,{key:e.id,value:e,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.value),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,i._)("span",ze,[(0,i.Wm)(Oe,{icon:"mdi-information-outline"}),(0,i.Uk)(" "+(0,l.zw)(e.data.gravite_dangerosite_ir?.description),1)])])])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(Me,{cols:"12",sm:"12",md:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ye,{data:e.data,listValRef:e.listValRef,"widget-classes":"card-xxl-stretch mb-5 mb-xl-8","widget-color":"#23716f"},null,8,["data","listValRef"])])),_:1})])])])])])])),_:1}),e.$route.params.id?((0,i.wg)(),(0,i.j4)(Ee,{key:0,list:e.data.plan_actions,"widget-classes":"card-xxl-stretch mb-5 mb-xl-8 bg-smm"},null,8,["list"])):(0,i.kq)("",!0)])])),_:1},8,["onSubmit"]),(0,i._)("div",Ue,[qe,e.add?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t[22]||(t[22]=(...t)=>e.updateData&&e.updateData(...t)),id:"kt_form1_submit",ref:"submitButton1",class:"btn btn-info"},De,512)),e.add?((0,i.wg)(),(0,i.iD)("button",{key:1,onClick:t[23]||(t[23]=(...t)=>e.saveData&&e.saveData(...t)),id:"kt_form1_submit",ref:"submitButton1",class:"btn btn-primary"},Ae,512)):(0,i.kq)("",!0)])])}var Te=a(8542),Ze=a.n(Te),Ge=a(8932),Pe=a(5886),He=a(2201),Ie=a(8433),Ne=a(2567),Oe=(0,i.aZ)({components:{MixedWidget14:Pe.Z,TableWidgetPlan:Ne.Z},computed:{currentRouteName(){return window.location.origin},rules(){const e=[e=>!!e||"Champ obligatoire"];return e}},name:"customer-details",data(){return{add:!0,niveau_m:0,data2:{},listValRef:{activites:[],processuses:[],services:[],zones:[],poste_travails:[],themes:[],aspects:[],impacts:[],situations:[],frequences:[],gravite_etendus:[],gravite_dangerosites:[],gravite_persistances:[],moyen_maitrise_humains:[],moyen_maitrise_techniques:[],moyen_maitrise_organisations:[],niveau_priorites:[],niveau_maitrises:[],plan_actions:[]},activites:[],services:[],zones:[],poste_travails:[],gravite_dangerosites:[],gravite_dangerosite_irs:[],data:{moyen_maitrise_humains:[],moyen_maitrise_techniques:[],moyen_maitrise_organisations:[],plan_actions:[],niveau_priorite:1,niveau_maitrise:0,processus:null,service:null,activite:null,zone:null,poste_travail:null,aspect:null,impact:null,situation:null,delai:(new Date).toISOString().substr(0,10),menu2:!1,s_ns:!1,theme:null,frequence:null,gravite_etendu:null,gravite_dangerosite:null,gravite_persistance:null,frequence_ir:null,gravite_etendu_ir:null,gravite_dangerosite_ir:null,gravite_persistance_ir:null,impact_residuel:0},form:{zone_id:null,processus_id:null,service_id:null,activite_id:null,poste_travail_id:null,aspect_id:null,impact_id:null,theme_id:null,situation_id:null,frequence_id:null,gravite_etendu_id:null,gravite_dangerosite_id:null,gravite_persistance_id:null,frequence_ir_id:null,gravite_etendu_ir_id:null,gravite_dangerosite_ir_id:null,gravite_persistance_ir_id:null,s_ns:!1,niveau_maitrise_id:null,niveau_priorite_id:null,moyen_maitrise_humains:[],moyen_maitrise_organisations:[],moyen_maitrise_techniques:[],plan_actions:[],delai:(new Date).toISOString().substr(0,10),impact_residuel:null}}},watch:{"data.delai"(){this.form.delai=this.data.delai},"data.theme"(){this.form.theme_id=this.data.theme.id,this.gravite_dangerosites=this.listValRef.gravite_dangerosites.filter((e=>e.theme_id===this.data.theme.id)),this.gravite_dangerosite_irs=this.listValRef.gravite_dangerosites.filter((e=>e.theme_id===this.data.theme.id))},"data.processus"(){this.form.processus_id=this.data.processus.id,this.services=this.listValRef.services.filter((e=>e.processus_id===this.data.processus.id))},"data.service"(){this.form.service_id=this.data.service.id,this.activites=this.listValRef.activites.filter((e=>e.service_id===this.data.service.id))},"data.activite"(){this.form.activite_id=this.data.activite.id,this.zones=this.listValRef.zones.filter((e=>e.activite_id===this.data.activite.id))},"data.zone"(){this.form.zone_id=this.data.zone.id,this.poste_travails=this.listValRef.poste_travails.filter((e=>e.zone_id===this.data.zone.id))},"data.poste_travail"(){this.form.poste_travail_id=this.data.poste_travail.id},"data.aspect"(){this.form.aspect_id=this.data.aspect.id},"data.impact"(){this.form.impact_id=this.data.impact.id},"data.situation"(){this.form.situation_id=this.data.situation.id},"data.frequence"(){this.form.frequence_id=this.data.frequence.id},"data.gravite_etendu"(){this.form.gravite_etendu_id=this.data.gravite_etendu.id},"data.gravite_dangerosite"(){this.form.gravite_dangerosite_id=this.data.gravite_dangerosite.id},"data.gravite_persistance"(){this.form.gravite_persistance_id=this.data.gravite_persistance.id},"data.frequence_ir"(){this.form.frequence_ir_id=this.data.frequence_ir.id},"data.gravite_etendu_ir"(){this.form.gravite_etendu_ir_id=this.data.gravite_etendu_ir.id},"data.gravite_dangerosite_ir"(){this.form.gravite_dangerosite_ir_id=this.data.gravite_dangerosite_ir.id},"data.gravite_persistance_ir"(){this.form.gravite_persistance_ir_id=this.data.gravite_persistance_ir.id},"data.niveau_m"(){let e;e=this.listValRef.niveau_maitrises[this.niveau_m],this.form.niveau_maitrise_id=e.id},"data.niveau_priorite"(){console.log(this.listValRef.niveau_priorites)},"data.moyen_maitrise_humains"(){let e;e=this.data.moyen_maitrise_humains,this.form.moyen_maitrise_humains=e.map((e=>e.id))},"data.moyen_maitrise_organisations"(){let e;e=this.data.moyen_maitrise_organisations,this.form.moyen_maitrise_organisations=e.map((e=>e.id))},"data.moyen_maitrise_techniques"(){let e;e=this.data.moyen_maitrise_techniques,this.form.moyen_maitrise_techniques=e.map((e=>e.id))},"data.plan_actions"(){let e;e=this.data.plan_actions,this.form.plan_actions=e.map((e=>e.id))}},beforeMount(){this.$route.params.id&&(this.add=!1),this.fetch()},methods:{async updateData(){(0,He.tv)();var e=this.form,t={method:"put",url:this.currentRouteName+"/api/analyse/"+this.$route.params.id,headers:{"Content-Type":"application/json"},data:e};(0,Ie.Z)(t).then((e=>{Ze().fire({text:"Analyse environnementale bien Modifié",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn fw-bold btn-light-primary"}}).then((e=>{this.$router.push({name:"apps-analyse-show-analyse",params:{id:this.$route.params.id}})}))})).catch((function(e){Ze().fire({text:e,icon:"error",buttonsStyling:!1,confirmButtonText:"Réessayer!",customClass:{confirmButton:"btn fw-bold btn-light-danger"}})}))},async saveData(){(0,He.tv)();var e=this.form,t={method:"post",url:this.currentRouteName+"/api/analyse",headers:{"Content-Type":"application/json"},data:e};(0,Ie.Z)(t).then((e=>{Ze().fire({text:"Analyse environnementale bien Ajoutée",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn fw-bold btn-light-success"}}).then((e=>{this.$router.push({name:"apps-analyse-analyse-env-list",params:{id:this.$route.params.id}})}))})).catch((function(e){Ze().fire({text:e,icon:"error",buttonsStyling:!1,confirmButtonText:"Réessayer!",customClass:{confirmButton:"btn fw-bold btn-light-danger"}})}))},async fetch(){const e=await Ie.Z.get(this.currentRouteName+"/api/valeur-ref");this.listValRef=e.data,await this.fetchAnalyse()},async fetchAnalyse(){if(this.$route.params.id){const e=await Ie.Z.get(this.currentRouteName+"/api/analyse/"+this.$route.params.id);this.data=e.data,console.info(this.data)}}},setup(){const e=(0,He.yj)();return(0,i.bv)((()=>{(0,Ge.M)(e.params.id?"Modifier AE-"+e.params.id:"Ajouter une AE",["Accueil","Analyse environnementale"])})),{}}}),$e=a(3744);const Ke=(0,$e.Z)(Oe,[["render",Me]]);var Ye=Ke}}]);
//# sourceMappingURL=8007.e2fac870.js.map