{"version":3,"file":"js/164.64ae9802.js","mappings":"gMAMeA,MAAM,oD,GACHA,MAAM,8C,GAcdA,MAAM,wBACN,qCAAmC,Q,GA4BnCA,MAAM,6BACN,qCAAmC,Q,GAE9BA,MAAM,e,GAMDA,MAAM,uB,GAUNA,MAAM,uB,GAqBXA,MAAM,gD,GAMPA,MAAM,sE,aAiDHA,MAAM,iC,GACJA,MAAM,0B,GACHA,MAAM,gC,GAKTA,MAAM,wB,uBAcZA,MAAM,oB,uYArKjB,QAmLM,aAlLJ,QAiLS,Q,kBAhLP,IAyEe,EAzEf,QAyEe,GAzEDA,MAAM,kCAAgC,C,kBAClD,IAeM,EAfN,OAeM,aAbJ,OAUM,MAVN,EAUM,EATJ,OAEO,OAFP,EAEO,EADL,QAA2D,GAA/CC,IAAI,8C,SAElB,OAKE,SAJAC,KAAK,O,qCACI,EAAM,UACfF,MAAM,gDACNG,YAAY,c,iBAFH,EAAAC,eAQf,OA4BM,MA5BN,EA4BM,EAxBJ,QAuBkB,GAtBhBC,UAAA,GACAC,MAAM,S,WACG,EAAAC,Q,qCAAA,EAAO,WACfC,MAAO,EAAAC,SACP,aAA4B,G,MAA6E,EAAE,G,eAA0D,EAAE,SAAS,K,UAAuD,EAAE,I,sBAAkE,EAAE,gBAc9SC,QAAQ,UACR,mBACAC,MAAM,mCACNX,MAAM,S,+CAGV,OA0BM,MA1BN,EA0BM,EAtBJ,OAqBM,MArBN,EAqBM,EApBJ,QASQ,GARL,QAAO,EAAAY,cACRZ,MAAM,4BACNa,GAAG,yB,mBAEH,IAEO,EAFP,OAEO,OAFP,EAEO,EADL,QAA0D,GAA9CZ,IAAI,6C,QACX,iB,qBAIT,QAQc,GAPZa,GAAG,2BACHd,MAAM,wE,mBAEN,IAEO,EAFP,OAEO,OAFP,EAEO,EADL,QAA0D,GAA9CC,IAAI,6C,QACX,iC,oBAMf,QAAqB,IACrB,QAoGc,Q,kBAnGZ,IAsFe,EAtFf,QAsFe,GArFLc,KAAM,EAAAA,K,+BAAA,EAAI,QACjB,iBAAgB,EAAAC,aAChBZ,OAAQ,EAAAA,OACRa,QAAS,EAAAA,QACTT,MAAO,EAAAU,oBACR,yBACA,mBACAC,SAAA,I,CAEiB,CAAC,wBAAsB,SACtC,EAD0CC,UAAI,EAC9C,OAEI,IAFJ,EAAwD,SAClD,QAAGA,EAAKC,QAAQC,gBAAc,MAGrB,CAAC,sBAAoB,SACpC,EADwCF,UAAI,EAC5C,OAmBM,MAnBN,EAmBM,G,aAhBJ,QAeM,mBAfWA,EAAKC,QAAQE,cAAlBC,K,WAAZ,QAeM,OAfuCC,IAAKD,EAAEX,I,EAClD,QAaY,GAbAa,KAAI,GAAKF,EAAEG,Q,CACJC,WAAS,SACxB,EAD4BC,WAAK,EACjC,OAQM,OARN,QAQM,CARD7B,MAAM,oCAA2C,EAAA8B,IAAE,EACtD,OAMM,OANN,QAMM,CALJ9B,MAAM,iDACL+B,IAAM,EAAAJ,KAAOH,EAAEG,MACRE,IAAK,QAEV,EAAAG,YAAY,EAAAL,OAAI,O,yBAIzB,IAAyB,EAAzB,OAAyB,qBAAhBH,EAAEG,MAAI,M,oCAKN,CAAC,iBAAe,SAC/B,EADmCP,UAAI,EACvC,QAyBQ,GAzBDpB,MAAM,sBAAoB,C,kBAC/B,IAOc,EAPd,QAOc,GANZA,MAAM,MACLc,GAAE,qCAAuCM,EAAKa,IAAIpB,M,mBAEnD,IAEQ,EAFR,QAEQ,GAFDP,MAAM,OAAO4B,KAAK,W,mBACvB,IAA2C,EAA3C,QAA2C,GAAnClC,MAAM,cAAY,C,kBAAC,IAAO,E,QAAP,c,qCAG/B,QAOc,GANZA,MAAM,MACLc,GAAE,qCAAuCM,EAAKa,IAAIpB,M,mBAEnD,IAEQ,EAFR,QAEQ,GAFDP,MAAM,UAAU4B,KAAK,W,mBAC1B,IAA8C,EAA9C,QAA8C,GAAtClC,MAAM,cAAY,C,kBAAC,IAAU,E,QAAV,iB,qCAG/B,QAOQ,GANNM,MAAM,SACN4B,KAAK,UACJ,QAAK,GAAE,EAAAC,WAAWf,GACnBpB,MAAM,O,mBAEN,IAA8C,EAA9C,QAA8C,GAAtCA,MAAM,cAAY,C,kBAAC,IAAU,E,QAAV,iB,iDAIhB,CAAC,kBAAgB,SAChC,EADoCoB,UAAI,EACxC,OAkBM,MAlBN,EAkBM,EAjBJ,OAIM,MAJN,EAIM,EAHJ,OAEO,OAFP,GAEO,QADFA,EAAKC,QAAQe,UAAW,KAC7B,MAGF,OAUM,MAVN,EAUM,EATJ,OAQO,OAPLpC,OAAK,SAAC,eACE,eACRqC,KAAK,cACJC,OAAK,eAAWlB,EAAKC,QAAQe,SAAW,MACxC,gBAAehB,EAAKC,QAAQe,SAC7B,gBAAc,IACd,gBAAc,O,mFAMxB,OAWM,MAXN,EAWM,EAVJ,QAAgE,G,WAAzC,EAAArB,K,qCAAA,EAAI,QAAGwB,OAAQ,EAAAC,W,iCACtC,QAQgB,GAPdxC,MAAM,SACLyC,MAAO,EAAAzB,aACRL,MAAM,iBACNT,KAAK,SACLwC,IAAI,KACJC,IAAI,KACH,QAAK,eAAE,EAAA3B,aAAe4B,SAASC,EAAQ,M,iHAiBpD,GACEC,WAAY,CAAEC,WAAU,IAAEC,YAAW,KACrCC,SAAU,CACRjB,cACE,OAAQL,GACNA,EACGuB,MAAM,KACNC,KAAKC,GAASA,EAAKC,OAAO,KAC1BC,KAAK,GACZ,EACApC,sBACE,OAAIqC,KAAKhD,QACAgD,KAAKC,YAAYC,QAAQC,GACvBA,EAAWpC,iBAAmBiC,KAAKhD,QAAQM,KAG/C0C,KAAKC,WACd,EACAG,mBACE,OAAOC,OAAOC,SAASC,MACzB,EACAtB,YACE,OAAOuB,KAAKC,KAAKT,KAAKrC,oBAAoBqB,OAASgB,KAAKvC,aAC1D,GAGFiD,SACsB,QAAI,MACxB,SAAU,MACR,OAA0B,iBAAkB,CAAC,oBAAoB,GAErE,EACAC,OACE,MAAO,CACLnD,KAAM,EACNC,aAAc,GACdC,QAAS,CACP,CAAEkD,MAAO,UAAW1C,IAAK,kBACzB,CAAE0C,MAAO,SAAU1B,MAAO,QAC1B,CAAE0B,MAAO,cAAe1B,MAAO,eAC/B,CAAE0B,MAAO,UAAW1B,MAAO,WAAYhB,IAAK,YAC5C,CAAE0C,MAAO,QAAS1B,MAAO,SACzB,CAAE0B,MAAO,eAAgB1C,IAAK,gBAC9B,CAAE0C,MAAO,UAAW1C,IAAK,YAE3B+B,YAAa,GACb/C,SAAU,GACVF,QAAS,KACTH,OAAQ,GACRgE,aAAc,GAElB,EACAC,UACEd,KAAKe,OACP,EACAC,QAAS,CACPC,QAAQC,GACNlB,KAAKxC,KAAO0D,CACd,EACAC,eACMnB,KAAKxC,KAAO,GACdwC,KAAKxC,MAET,EACA4D,WACMpB,KAAKxC,KAAOwC,KAAKf,WACnBe,KAAKxC,MAET,EACA6D,iBAAiBxD,GACf,MAAMP,EAAKO,EAAKa,IAAIpB,SACdgE,EAAA,YACItB,KAAKI,iBAAmB,eAAiB9C,GAChDiE,MAAMC,IACL,SAAU,CACRrD,KAAM,4BACNsD,KAAM,UACNC,gBAAgB,EAChBC,kBAAmB,KACnBC,YAAa,CACXC,cAAe,iCAEjB,IAEHC,OAAM,SAAUC,GACf,SAAU,CACR5D,KAAM4D,EACNN,KAAM,QACNC,gBAAgB,EAChBC,kBAAmB,aACnBC,YAAa,CACXC,cAAe,iCAGrB,IACF,MAAMG,EAAgBhC,KAAKrC,oBAAoBsE,WAC5CpE,GAASA,EAAKP,KAAOA,KAED,IAAnB0E,GACFhC,KAAKrC,oBAAoBuE,OAAOF,EAAe,EAEnD,EACAX,cACE,MAAMc,QAAcb,EAAA,MAAUtB,KAAKI,iBAAmB,eAEtDJ,KAAKa,aAAesB,EAAMxB,KAC1BX,KAAKC,YAAckC,EAAMxB,KAEzB,MAAMzD,QAAiBoE,EAAA,MAAUtB,KAAKI,iBAAmB,gBACzDJ,KAAK9C,SAAWA,EAASyD,IAC3B,I,UCvSJ,MAAMyB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://demo1/./src/views/apps/analyse/PlanActionList.vue","webpack://demo1/./src/views/apps/analyse/PlanActionList.vue?2f27"],"sourcesContent":["<template>\n  <div>\n    <v-card>\n      <v-card-title class=\"d-flex justify-content-between\">\n        <div>\n          <!--begin::Rechercher-->\n          <div class=\"d-flex align-items-center position-relative mt-2\">\n            <span class=\"svg-icon svg-icon-1 position-absolute ms-6\">\n              <inline-svg src=\"media/icons/duotune/general/gen021.svg\" />\n            </span>\n            <input\n              type=\"text\"\n              v-model=\"search\"\n              class=\"form-control form-control-solid w-250px ps-15\"\n              placeholder=\"Rechercher\"\n            />\n          </div>\n\n          <!--end::Rechercher-->\n        </div>\n        <div\n          class=\"d-flex pt-3 px-6 w-75\"\n          data-kt-subscription-table-toolbar=\"base\"\n        >\n          <v-autocomplete\n            clearable\n            color=\"yellow\"\n            v-model=\"analyse\"\n            :items=\"analyses\"\n            :item-title=\"\n              (e) => {\n                return (\n                  'kt-' +\n                  e.id +\n                  ' Activité : ' +\n                  e.activite.name +\n                  ' F*G : ' +\n                  e.F_G +\n                  ' Impact Résiduel : ' +\n                  e.impact_residuel\n                );\n              }\n            \"\n            density=\"compact\"\n            return-object\n            label=\"Environemmentale Analyse Associé\"\n            class=\"fs-10\"\n          ></v-autocomplete>\n        </div>\n        <div\n          class=\"d-flex justify-content-end\"\n          data-kt-subscription-table-toolbar=\"base\"\n        >\n          <div class=\"d-flex my-4\">\n            <v-btn\n              @click=\"exportToExcel\"\n              class=\"btn btn-sm btn-light me-2\"\n              id=\"kt_user_follow_button\"\n            >\n              <span class=\"svg-icon svg-icon-2\">\n                <inline-svg src=\"media/icons/duotune/arrows/arr078.svg\" />\n              </span>\n              Exporter\n            </v-btn>\n\n            <router-link\n              to=\"/apps/analyse/add-action\"\n              class=\"btn btn-sm btn-primary btn-hover-secondary text-hover-dark me-3 pb-0\"\n            >\n              <span class=\"svg-icon svg-icon-2\">\n                <inline-svg src=\"media/icons/duotune/arrows/arr075.svg\" />\n              </span>\n              Ajouter un Plan d'action\n            </router-link>\n          </div>\n        </div>\n      </v-card-title>\n      <v-spacer></v-spacer>\n      <v-card-text>\n        <v-data-table\n          v-model:page=\"page\"\n          :items-per-page=\"itemsPerPage\"\n          :search=\"search\"\n          :headers=\"headers\"\n          :items=\"filteredPlanActions\"\n          hide-default-footer\n          show-group-by\n          expanded\n        >\n          <template v-slot:[`item.analyse_env_id`]=\"{ item }\">\n            <p class=\"text-white text-hover-primary fw-bolder fs-8\">\n              kt- {{ item.columns.analyse_env_id }}\n            </p>\n          </template>\n          <template v-slot:[`item.responsables`]=\"{ item }\">\n            <div\n              class=\"symbol-group symbol-hover flex-nowrap flex-grow-1 min-w-100px pe-2\"\n            >\n              <div v-for=\"e in item.columns.responsables\" :key=\"e.id\">\n                <v-tooltip :text=\"`${e.name}`\">\n                  <template v-slot:activator=\"{ props }\">\n                    <div class=\"symbol symbol-circle symbol-25px\" v-bind=\"on\">\n                      <div\n                        class=\"symbol-label fs-8 fw-bold bg-default text-dark\"\n                        :set=\"(name = e.name)\"\n                        v-bind=\"props\"\n                      >\n                        {{ getInitials(name) }}\n                      </div>\n                    </div>\n                  </template>\n                  <span>{{ e.name }}</span>\n                </v-tooltip>\n              </div>\n            </div>\n          </template>\n          <template v-slot:[`item.actions`]=\"{ item }\">\n            <v-row class=\"text-center d-flex\">\n              <router-link\n                class=\"m-2\"\n                :to=\"`/apps/analyse/edit-action-analyse/${item.raw.id}`\"\n              >\n                <v-btn color=\"info\" size=\"x-small\">\n                  <v-icon class=\"text-white\">mdi-eye</v-icon>\n                </v-btn>\n              </router-link>\n              <router-link\n                class=\"m-2\"\n                :to=\"`/apps/analyse/edit-action-analyse/${item.raw.id}`\"\n              >\n                <v-btn color=\"warning\" size=\"x-small\">\n                  <v-icon class=\"text-white\">mdi-pencil</v-icon>\n                </v-btn>\n              </router-link>\n              <v-btn\n                color=\"danger\"\n                size=\"x-small\"\n                @click=\"deleteItem(item)\"\n                class=\"m-2\"\n              >\n                <v-icon class=\"text-white\">mdi-delete</v-icon>\n              </v-btn>\n            </v-row>\n          </template>\n          <template v-slot:[`item.progress`]=\"{ item }\">\n            <div class=\"d-flex flex-column w-100 me-2\">\n              <div class=\"d-flex flex-stack mb-2\">\n                <span class=\"text-muted me-2 fs-7 fw-bold\">\n                  {{ item.columns.progress }}%\n                </span>\n              </div>\n\n              <div class=\"progress h-6px w-100\">\n                <div\n                  class=\"progress-bar\"\n                  :class=\"`bg-warning`\"\n                  role=\"progressbar\"\n                  :style=\"{ width: item.columns.progress + '%' }\"\n                  :aria-valuenow=\"item.columns.progress\"\n                  aria-valuemin=\"0\"\n                  aria-valuemax=\"100\"\n                ></div>\n              </div>\n            </div>\n          </template>\n        </v-data-table>\n        <div class=\"text-center pt-2\">\n          <v-pagination v-model=\"page\" :length=\"pageCount\"></v-pagination>\n          <v-text-field\n            class=\"d-none\"\n            :value=\"itemsPerPage\"\n            label=\"Items per page\"\n            type=\"number\"\n            min=\"-1\"\n            max=\"15\"\n            @input=\"itemsPerPage = parseInt($event, 10)\"\n          ></v-text-field>\n        </div>\n      </v-card-text>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { VDataTable } from \"vuetify/labs/VDataTable\";\nimport { VPagination } from \"vuetify/components/VPagination\";\nimport Swal from \"sweetalert2/dist/sweetalert2.min.js\";\nimport { onMounted, ref } from \"vue\";\nimport { setCurrentPageBreadcrumbs } from \"@/core/helpers/breadcrumb\";\nimport { IAE } from \"@/core/data/ae\";\n\nexport default {\n  components: { VDataTable, VPagination },\n  computed: {\n    getInitials() {\n      return (name) =>\n        name\n          .split(\" \")\n          .map((word) => word.charAt(0))\n          .join(\"\");\n    },\n    filteredPlanActions() {\n      if (this.analyse) {\n        return this.planActions.filter((planAction) => {\n          return planAction.analyse_env_id === this.analyse.id;\n        });\n      }\n      return this.planActions;\n    },\n    currentRouteName() {\n      return window.location.origin;\n    },\n    pageCount() {\n      return Math.ceil(this.filteredPlanActions.length / this.itemsPerPage);\n    },\n  },\n\n  setup() {\n    const width_m_m_t = ref(300);\n    onMounted(() => {\n      setCurrentPageBreadcrumbs(\"Plans d'action\", [\"Consulter les PA\"]);\n    });\n  },\n  data() {\n    return {\n      page: 1,\n      itemsPerPage: 10,\n      headers: [\n        { title: \"Analyse\", key: \"analyse_env_id\" },\n        { title: \"Action\", value: \"name\" },\n        { title: \"Description\", value: \"description\" },\n        { title: \"Progrés\", value: \"progress\", key: \"progress\" },\n        { title: \"Delai\", value: \"delai\" },\n        { title: \"Responsables\", key: \"responsables\" },\n        { title: \"Actions\", key: \"actions\" },\n      ],\n      planActions: [],\n      analyses: [],\n      analyse: null,\n      search: \"\",\n      initialPlans: [],\n    };\n  },\n  mounted() {\n    this.fetch();\n  },\n  methods: {\n    setpage(pageNumber) {\n      this.page = pageNumber;\n    },\n    previousPage() {\n      if (this.page > 1) {\n        this.page--;\n      }\n    },\n    nextPage() {\n      if (this.page < this.pageCount) {\n        this.page++;\n      }\n    },\n    async deleteItem(item) {\n      const id = item.raw.id;\n      await axios\n        .delete(this.currentRouteName + \"/api/action/\" + id)\n        .then((response) => {\n          Swal.fire({\n            text: \"Plan Action bien Supprimé\",\n            icon: \"success\",\n            buttonsStyling: false,\n            confirmButtonText: \"Ok\",\n            customClass: {\n              confirmButton: \"btn fw-bold btn-light-danger\",\n            },\n          });\n        })\n        .catch(function (error) {\n          Swal.fire({\n            text: error,\n            icon: \"error\",\n            buttonsStyling: false,\n            confirmButtonText: \"Réessayer!\",\n            customClass: {\n              confirmButton: \"btn fw-bold btn-light-danger\",\n            },\n          });\n        });\n      const indexToRemove = this.filteredPlanActions.findIndex(\n        (item) => item.id === id\n      );\n      if (indexToRemove !== -1) {\n        this.filteredPlanActions.splice(indexToRemove, 1);\n      }\n    },\n    async fetch() {\n      const plans = await axios.get(this.currentRouteName + \"/api/action\");\n\n      this.initialPlans = plans.data;\n      this.planActions = plans.data;\n\n      const analyses = await axios.get(this.currentRouteName + \"/api/analyse\");\n      this.analyses = analyses.data;\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.v-data-table-footer {\n  display: none;\n}\n\ntable.dataTable {\n  clear: both;\n  margin-top: 6px !important;\n  margin-bottom: 6px !important;\n  max-width: none !important;\n  border-collapse: separate !important;\n  border-spacing: 0;\n}\n\ntable {\n  caption-side: bottom;\n  border-collapse: separate !important;\n}\n\ntable.dataTable > thead {\n  th.sorting {\n    position: relative;\n  }\n\n  .sorting:after {\n    position: absolute;\n  }\n}\n\ntable {\n  border-radius: 0.25em;\n  border-collapse: collapse;\n}\n\nth {\n  border-bottom: 1px solid #364043 !important;\n  color: #e2b842 !important;\n  font-size: 0.85em !important;\n  font-weight: 600 !important;\n  text-align: left !important;\n}\n\ntd {\n  color: #fff !important;\n  font-weight: 400 !important;\n}\n\n.disabled td {\n  color: #4f5f64;\n}\n\ntbody tr {\n  transition: background 0.25s ease !important;\n}\n\ntbody tr:hover {\n  background: rgba(1, 85, 8, 0.18) !important;\n}\n\n.v-data-table tr:hover {\n  background: rgba(1, 85, 8, 0.18) !important;\n}\n\n.el-pagination.is-background .btn-next,\n.el-pagination.is-background .btn-prev,\n.el-pagination.is-background .el-pager li {\n  background: none;\n  border-radius: 0.475rem;\n  font-weight: 500;\n  font-size: 1.075rem;\n  font-family: Poppins, Helvetica, sans-serif;\n}\n\n.el-pagination.is-background .el-pager li:not(.disabled).active {\n  background-color: #009ef7;\n}\n\ntable.dataTable td.dataTables_empty,\ntable.dataTable th.dataTables_empty {\n  text-align: center;\n}\n\ndiv.dataTables_wrapper div.dataTables_processing {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n}\n\n.v-data-table thead {\n  font-size: 1.3rem;\n  background-color: #e9dd1785;\n  color: white;\n}\n\n.v-data-table {\n  color: white;\n}\n\n.medium-text {\n  font-size: 1rem;\n}\n\n.max-width-cell {\n  width: 50vh;\n  font-size: 1.2rem !important;\n}\n\n.small-cell {\n  height: 10vh;\n  overflow-y: scroll;\n}\n.v-data-table {\n  font-size: 1rem;\n}\n.style-1 td {\n  height: 100px !important;\n}\n\n.table-wrapper {\n  cursor: grab;\n  overflow: auto;\n}\n\n.card-data-table {\n  margin-right: -14px !important;\n  margin-left: -14px !important;\n}\n\n.v-tooltip .v-overlay__content {\n  background: #053d0f;\n}\n\n.btn-action {\n  padding: 0.6rem !important;\n}\n\n.form-control.form-control-solid {\n  background-color: #235153;\n  border-color: #eef3f7;\n  color: #ffffff;\n}\n</style>\n","import { render } from \"./PlanActionList.vue?vue&type=template&id=1a2865aa\"\nimport script from \"./PlanActionList.vue?vue&type=script&lang=js\"\nexport * from \"./PlanActionList.vue?vue&type=script&lang=js\"\n\nimport \"./PlanActionList.vue?vue&type=style&index=0&id=1a2865aa&lang=scss\"\n\nimport exportComponent from \"/Users/dev01/Documents/projects/metronic_v8.0.38/vue/demo1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","src","type","placeholder","search","clearable","color","analyse","items","analyses","density","label","exportToExcel","id","to","page","itemsPerPage","headers","filteredPlanActions","expanded","item","columns","analyse_env_id","responsables","e","key","text","name","activator","props","on","set","getInitials","raw","size","deleteItem","progress","role","style","length","pageCount","value","min","max","parseInt","$event","components","VDataTable","VPagination","computed","split","map","word","charAt","join","this","planActions","filter","planAction","currentRouteName","window","location","origin","Math","ceil","setup","data","title","initialPlans","mounted","fetch","methods","setpage","pageNumber","previousPage","nextPage","async","axios","then","response","icon","buttonsStyling","confirmButtonText","customClass","confirmButton","catch","error","indexToRemove","findIndex","splice","plans","__exports__","render"],"sourceRoot":""}