"use strict";(self["webpackChunkdemo1"]=self["webpackChunkdemo1"]||[]).push([[3926],{3926:function(e,t,l){l.d(t,{Z:function(){return b}});var a=l(6252),o=l(3577);const n=(0,a._)("p",null,"Cumulative by year:",-1),r={class:"card-header border-0 pt-5"},u={class:"card-title align-items-start flex-column"},s={class:"card-label text-white fw-bolder fs-5 mb-1"},i={class:"card-toolbar"},d={class:"float-right"},c={class:"card-body"};function m(e,t,l,m,h,p){const v=(0,a.up)("v-card-title"),w=(0,a.up)("v-card-text"),f=(0,a.up)("v-card"),g=(0,a.up)("v-list-subheader"),y=(0,a.up)("v-list-item-title"),b=(0,a.up)("v-list-item-subtitle"),_=(0,a.up)("v-list-item"),k=(0,a.up)("v-list"),W=(0,a.up)("v-col"),x=(0,a.up)("v-icon"),C=(0,a.up)("v-btn"),V=(0,a.up)("v-text-field"),S=(0,a.up)("v-row"),U=(0,a.up)("v-card-actions"),z=(0,a.up)("v-dialog"),j=(0,a.up)("apexchart");return(0,a.wg)(),(0,a.j4)(S,{class:"mt-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{md:"4",class:"d-none"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{style:(0,o.j5)("color:"+e.chart.barColor)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.chart.theme)+" - "+(0,o.zw)(e.chart.chartName),1)])),_:1},8,["style"]),(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[n])),_:1})])),_:1}),(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Valeurs mensuelles:")])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.chart.month_values,(e=>((0,a.wg)(),(0,a.j4)(_,{key:e.id},{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.month)+" - "+(0,o.zw)(e.value),1)])),_:2},1024),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.year),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])])),_:1}),(0,a.Wm)(W,{md:"12"},{default:(0,a.w5)((()=>[e.chart?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,o.C_)(["card",e.widgetClasses]),style:{"background-color":"#235153"}},[(0,a._)("div",r,[(0,a._)("h3",u,[(0,a._)("span",s,(0,o.zw)(e.chart.chartName),1),(0,a._)("span",{class:"text-muted fw-bold fs-7",style:(0,o.j5)("color:"+e.chart.barColor)},(0,o.zw)(e.chart.theme),5)]),(0,a._)("div",i,[(0,a._)("div",d,[(0,a.Wm)(C,{onClick:t[0]||(t[0]=t=>e.deleteItem(e.chart.id)),color:"danger",class:"ma-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{icon:"mdi-delete",color:"white"})])),_:1}),(0,a.Wm)(C,{onClick:t[1]||(t[1]=t=>e.dialog=!0),style:(0,o.j5)("background:"+e.chart.barColor)},{default:(0,a.w5)((()=>[(0,a.Uk)("Ajouter les valeurs")])),_:1},8,["style"]),(0,a.Wm)(z,{modelValue:e.dialog,"onUpdate:modelValue":t[5]||(t[5]=t=>e.dialog=t),"max-width":"600"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Ajouter les valeurs")])),_:1}),(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(V,{modelValue:e.monthValue.year,"onUpdate:modelValue":t[2]||(t[2]=t=>e.monthValue.year=t),label:"Year"},null,8,["modelValue"]),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.months,((e,t)=>((0,a.wg)(),(0,a.j4)(W,{key:t,cols:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:e.month,placeholder:e.month},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,{color:"primary",onClick:t[3]||(t[3]=t=>e.addMonthValues(e.chart.id))},{default:(0,a.w5)((()=>[(0,a.Uk)("Sauvegarder")])),_:1}),(0,a.Wm)(C,{onClick:t[4]||(t[4]=t=>e.dialog=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("Cancel")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])])]),(0,a._)("div",c,[(0,a.Wm)(j,{type:"bar",options:e.options,series:e.series,height:e.height},null,8,["options","series","height"])])],2)):(0,a.kq)("",!0)])),_:1})])),_:1})}var h=l(8816),p=l(8433),v=l(8542),w=l.n(v),f=(0,a.aZ)({computed:{currentRouteName(){return"https://smm.test"}},name:"widget-1",props:{year:null,chart:null,barColor:String,widgetClasses:String,height:Number},data(){return{dialog:!1,monthValue:{year:null},months:[{month:"jan",value:0},{month:"Fév",value:0},{month:"Mar",value:0},{month:"Avr",value:0},{month:"Mai",value:0},{month:"Juin",value:0},{month:"Juil",value:0},{month:"Août",value:0},{month:"Sept",value:0},{month:"Oct",value:0},{month:"Nov",value:0},{month:"Déc",value:0}]}},watch:{"monthValue.year"(e){const t=this.chart.month_values.filter((t=>t.year==e));t.length>0&&(this.months=t)}},setup(e){const t=(0,h.mK)("--bs-gray-500"),l=(0,h.mK)("--bs-gray-200"),a=(0,h.mK)("--bs-gray-300");let o=[],n=[],r=0;e.chart.month_values.forEach((t=>{t.year===e.year&&(r+=t.value,o.push(t.month),n.push(t.value))})),console.log(n);const u=[{name:e.chart.chartName,data:n},{name:"Cumul",data:Array(n.length).fill((r/n.length).toFixed(2))}],s={chart:{fontFamily:"inherit",type:"bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:["30%"],endingShape:"rounded"}},legend:{show:!1},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:o,axisBorder:{show:!1},axisTicks:{show:!1},labels:{style:{colors:t,fontSize:"12px"}}},yaxis:{labels:{style:{colors:t,fontSize:"12px"}}},fill:{opacity:1},states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"none",value:0}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"none",value:0}}},tooltip:{style:{fontSize:"12px"},y:{formatter:function(e){return e}}},colors:[e.barColor,a],grid:{borderColor:l,strokeDashArray:4,yaxis:{lines:{show:!0}}}};return{options:s,series:u}},methods:{async deleteItem(e){await p.Z["delete"](this.currentRouteName+"/api/chart-data/"+e).then((e=>{w().fire({text:"Indicateur bien Supprimé",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn fw-bold btn-light-danger"}})})).catch((function(e){w().fire({text:e,icon:"error",buttonsStyling:!1,confirmButtonText:"Réessayer!",customClass:{confirmButton:"btn fw-bold btn-light-danger"}})}))},addMonthValues(e){const t=this.months.map((e=>({month:e.month,value:e.value,year:this.monthValue.year})));console.log(t),p.Z.post(this.currentRouteName+`/api/chart-data/${e}/month-values`,t).then((e=>{console.log(e.data),this.dialog=!1,location.reload()})).catch((e=>{console.log(e)}))}}}),g=l(3744);const y=(0,g.Z)(f,[["render",m]]);var b=y}}]);
//# sourceMappingURL=3926.25590b43.js.map