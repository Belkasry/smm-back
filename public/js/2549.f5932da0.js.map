{"version":3,"file":"js/2549.f5932da0.js","mappings":"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","sources":["webpack://demo1/./src/views/apps/analyse/PlanActionList.vue","webpack://demo1/./src/views/apps/analyse/PlanActionList.vue?2f27"],"sourcesContent":["<template>\n  <div>\n    <v-card>\n      <v-card-title class=\"d-flex justify-content-between\">\n        <div>\n          <!--begin::Search-->\n          <div class=\"d-flex align-items-center position-relative mt-2\">\n            <span class=\"svg-icon svg-icon-1 position-absolute ms-6\">\n              <inline-svg src=\"media/icons/duotune/general/gen021.svg\" />\n            </span>\n            <input\n              type=\"text\"\n              v-model=\"search\"\n              class=\"form-control form-control-solid w-250px ps-15\"\n              placeholder=\"Search\"\n            />\n          </div>\n\n          <!--end::Search-->\n        </div>\n        <div\n          class=\"d-flex pt-3 px-6 w-75\"\n          data-kt-subscription-table-toolbar=\"base\"\n        >\n          <v-autocomplete\n            clearable\n            color=\"yellow\"\n            v-model=\"analyse\"\n            :items=\"analyses\"\n            :item-title=\"\n              (e) => {\n                return (\n                  'kt-' +\n                  e.id +\n                  ' Activité : ' +\n                  e.activite.name +\n                  ' F*G : ' +\n                  e.F_G +\n                  ' Impact Résiduel : ' +\n                  e.impact_residuel\n                );\n              }\n            \"\n            density=\"compact\"\n            return-object\n            label=\"Environemmentale Analyse Associé\"\n            class=\"fs-10\"\n          ></v-autocomplete>\n        </div>\n        <div\n          class=\"d-flex justify-content-end\"\n          data-kt-subscription-table-toolbar=\"base\"\n        >\n          <div class=\"d-flex my-4\">\n            <v-btn\n              @click=\"exportToExcel\"\n              class=\"btn btn-sm btn-light me-2\"\n              id=\"kt_user_follow_button\"\n            >\n              <span class=\"svg-icon svg-icon-2\">\n                <inline-svg src=\"media/icons/duotune/arrows/arr078.svg\" />\n              </span>\n              Export\n            </v-btn>\n\n            <router-link\n              to=\"/apps/analyse/add-action\"\n              class=\"btn btn-sm btn-primary btn-hover-secondary text-hover-dark me-3 pb-0\"\n            >\n              <span class=\"svg-icon svg-icon-2\">\n                <inline-svg src=\"media/icons/duotune/arrows/arr075.svg\" />\n              </span>\n              Ajouter un Plan d'action\n            </router-link>\n          </div>\n        </div>\n      </v-card-title>\n      <v-spacer></v-spacer>\n      <v-card-text>\n        <v-data-table\n          :search=\"search\"\n          :group-by=\"groupBy\"\n          :headers=\"headers\"\n          :items=\"filteredPlanActions\"\n          hide-default-footer\n          show-group-by\n          expanded\n        >\n          <template\n            v-slot:group-header=\"{ item, columns, toggleGroup, isGroupOpen }\"\n          >\n            <tr>\n              <td :colspan=\"columns.length\">\n                <h4 class=\"text-green\">\n                  <VBtn\n                    size=\"small\"\n                    variant=\"text\"\n                    :icon=\"isGroupOpen(item) ? '$expand' : '$next'\"\n                    @click=\"toggleGroup(item)\"\n                  ></VBtn>\n                  {{ \"kt-\" + JSON.stringify(item.value) }}\n                </h4>\n              </td>\n            </tr>\n          </template>\n          <template v-slot:[`item.actions`]=\"{ item }\">\n            <v-row class=\"text-center d-flex\">\n              <router-link\n                class=\"m-2\"\n                :to=\"`/apps/analyse/edit-action-analyse/${item.raw.id}`\"\n              >\n                <v-btn color=\"info\" size=\"x-small\">\n                  <v-icon class=\"text-white\">mdi-eye</v-icon>\n                </v-btn>\n              </router-link>\n              <router-link\n                class=\"m-2\"\n                :to=\"`/apps/analyse/edit-action-analyse/${item.raw.id}`\"\n              >\n                <v-btn color=\"warning\" size=\"x-small\">\n                  <v-icon class=\"text-white\">mdi-pencil</v-icon>\n                </v-btn>\n              </router-link>\n              <v-btn\n                color=\"danger\"\n                size=\"x-small\"\n                @click=\"deleteItem(item)\"\n                class=\"m-2\"\n              >\n                <v-icon class=\"text-white\">mdi-delete</v-icon>\n              </v-btn>\n            </v-row>\n          </template>\n          <template v-slot:[`item.progress`]=\"{ item }\">\n            <div class=\"d-flex flex-column w-100 me-2\">\n              <div class=\"d-flex flex-stack mb-2\">\n                <span class=\"text-muted me-2 fs-7 fw-bold\">\n                  {{ item.columns.progress }}%\n                </span>\n              </div>\n\n              <div class=\"progress h-6px w-100\">\n                <div\n                  class=\"progress-bar\"\n                  :class=\"`bg-warning`\"\n                  role=\"progressbar\"\n                  :style=\"{ width: item.columns.progress + '%' }\"\n                  :aria-valuenow=\"item.columns.progress\"\n                  aria-valuemin=\"0\"\n                  aria-valuemax=\"100\"\n                ></div>\n              </div>\n            </div>\n          </template>\n        </v-data-table>\n        <div class=\"text-center pt-2\">\n          <v-pagination v-model=\"page\" :length=\"pageCount\"></v-pagination>\n          <v-text-field\n            class=\"d-none\"\n            :value=\"itemsPerPage\"\n            label=\"Items per page\"\n            type=\"number\"\n            min=\"-1\"\n            max=\"15\"\n            @input=\"itemsPerPage = parseInt($event, 10)\"\n          ></v-text-field>\n        </div>\n      </v-card-text>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { VDataTable } from \"vuetify/labs/VDataTable\";\nimport { VPagination } from \"vuetify/components/VPagination\";\nimport Swal from \"sweetalert2/dist/sweetalert2.min.js\";\n\nexport default {\n  components: { VDataTable, VPagination },\n  computed: {\n    currentRouteName() {\n      return process.env.VUE_APP_API;\n    },\n    filteredPlanActions() {\n      if (this.analyse) {\n        return this.planActions.filter((planAction) => {\n          return planAction.analyse_env_id === this.analyse.id;\n        });\n      }\n      return this.planActions;\n    },\n  },\n  data() {\n    return {\n      page: 1,\n      pageCount: 0,\n      itemsPerPage: 10,\n      headers: [\n        { title: \"Action\", value: \"name\" },\n        { title: \"Description\", value: \"description\" },\n        { title: \"Progret\", value: \"progress\", key: \"progress\" },\n        { title: \"Delai\", value: \"delai\" },\n        { title: \"Actions\", key: \"actions\" },\n      ],\n      planActions: [],\n      analyses: [],\n      analyse: null,\n      search: \"\",\n      groupBy: [{ key: \"analyse_env_id\" }],\n      initialPlans: [],\n    };\n  },\n  mounted() {\n    this.fetch();\n  },\n  methods: {\n    async deleteItem(item) {\n      const id = item.raw.id;\n      await axios\n        .delete(this.currentRouteName + \"/api/action/\" + id)\n        .then((response) => {\n          Swal.fire({\n            text: \"Plan Action bien Supprimé\",\n            icon: \"success\",\n            buttonsStyling: false,\n            confirmButtonText: \"Ok\",\n            customClass: {\n              confirmButton: \"btn fw-bold btn-light-danger\",\n            },\n          });\n        })\n        .catch(function (error) {\n          Swal.fire({\n            text: error,\n            icon: \"error\",\n            buttonsStyling: false,\n            confirmButtonText: \"Try again!\",\n            customClass: {\n              confirmButton: \"btn fw-bold btn-light-danger\",\n            },\n          });\n        });\n      const indexToRemove = this.filteredPlanActions.findIndex(\n        (item) => item.id === id\n      );\n      if (indexToRemove !== -1) {\n        this.filteredPlanActions.splice(indexToRemove, 1);\n      }\n    },\n    async fetch() {\n      const plans = await axios.get(this.currentRouteName + \"/api/action\");\n\n      this.initialPlans = plans.data;\n      this.planActions = plans.data;\n\n      const analyses = await axios.get(this.currentRouteName + \"/api/analyse\");\n      this.analyses = analyses.data;\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.v-data-table-footer {\n  display: none;\n}\n\ntable.dataTable {\n  clear: both;\n  margin-top: 6px !important;\n  margin-bottom: 6px !important;\n  max-width: none !important;\n  border-collapse: separate !important;\n  border-spacing: 0;\n}\n\ntable {\n  caption-side: bottom;\n  border-collapse: separate !important;\n}\n\ntable.dataTable > thead {\n  th.sorting {\n    position: relative;\n  }\n\n  .sorting:after {\n    position: absolute;\n  }\n}\n\ntable {\n  border-radius: 0.25em;\n  border-collapse: collapse;\n}\n\nth {\n  border-bottom: 1px solid #364043 !important;\n  color: #e2b842 !important;\n  font-size: 0.85em !important;\n  font-weight: 600 !important;\n  text-align: left !important;\n}\n\ntd {\n  color: #fff !important;\n  font-weight: 400 !important;\n}\n\n.disabled td {\n  color: #4f5f64;\n}\n\ntbody tr {\n  transition: background 0.25s ease !important;\n}\n\ntbody tr:hover {\n  background: rgba(1, 85, 8, 0.18) !important;\n}\n\n.v-data-table tr:hover {\n  background: rgba(1, 85, 8, 0.18) !important;\n}\n\n.el-pagination.is-background .btn-next,\n.el-pagination.is-background .btn-prev,\n.el-pagination.is-background .el-pager li {\n  background: none;\n  border-radius: 0.475rem;\n  font-weight: 500;\n  font-size: 1.075rem;\n  font-family: Poppins, Helvetica, sans-serif;\n}\n\n.el-pagination.is-background .el-pager li:not(.disabled).active {\n  background-color: #009ef7;\n}\n\ntable.dataTable td.dataTables_empty,\ntable.dataTable th.dataTables_empty {\n  text-align: center;\n}\n\ndiv.dataTables_wrapper div.dataTables_processing {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n}\n\n.v-data-table thead {\n  font-size: 1.3rem;\n  background-color: #e9dd1785;\n  color: white;\n}\n\n.v-data-table {\n  color: white;\n}\n\n.medium-text {\n  font-size: 1rem;\n}\n\n.max-width-cell {\n  width: 50vh;\n  font-size: 1.2rem !important;\n}\n\n.small-cell {\n  height: 10vh;\n  overflow-y: scroll;\n}\n.v-data-table {\n  font-size: 1rem;\n}\n.style-1 td {\n  height: 100px !important;\n}\n\n.table-wrapper {\n  cursor: grab;\n  overflow: auto;\n}\n\n.card-data-table {\n  margin-right: -14px !important;\n  margin-left: -14px !important;\n}\n\n.v-tooltip .v-overlay__content {\n  background: aqua;\n}\n\n.btn-action {\n  padding: 0.6rem !important;\n}\n\n.form-control.form-control-solid {\n  background-color: #235153;\n  border-color: #eef3f7;\n  color: #ffffff;\n}\n</style>\n","import { render } from \"./PlanActionList.vue?vue&type=template&id=7c8d0cf6\"\nimport script from \"./PlanActionList.vue?vue&type=script&lang=js\"\nexport * from \"./PlanActionList.vue?vue&type=script&lang=js\"\n\nimport \"./PlanActionList.vue?vue&type=style&index=0&id=7c8d0cf6&lang=scss\"\n\nimport exportComponent from \"/Users/dev01/Documents/projects/metronic_v8.0.38/vue/demo1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","src","type","placeholder","search","clearable","color","analyse","items","analyses","density","label","exportToExcel","id","to","groupBy","headers","filteredPlanActions","expanded","item","columns","toggleGroup","isGroupOpen","colspan","length","size","variant","icon","JSON","stringify","value","raw","deleteItem","progress","role","style","page","pageCount","itemsPerPage","min","max","parseInt","$event","components","VDataTable","VPagination","computed","currentRouteName","this","planActions","filter","planAction","analyse_env_id","data","title","key","initialPlans","mounted","fetch","methods","async","axios","then","response","text","buttonsStyling","confirmButtonText","customClass","confirmButton","catch","error","indexToRemove","findIndex","splice","plans","__exports__","render"],"sourceRoot":""}