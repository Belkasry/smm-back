{"version":3,"file":"js/3467.1b6cb198.js","mappings":"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","sources":["webpack://demo1/./src/core/data/valeur-ref.ts","webpack://demo1/./src/core/helpers/breadcrumb.ts","webpack://demo1/./src/views/apps/analyse/AddActionAnalyse.vue","webpack://demo1/./src/views/apps/analyse/AddActionAnalyse.vue?d550"],"sourcesContent":["const listValRef = {};\n\nexport default listValRef;\n","import store from \"@/store\";\r\nimport { Actions } from \"@/store/enums/StoreEnums\";\r\n\r\n/**\r\n * Sets current page breadcrumbs\r\n * @param {string} pageTitle Current page title\r\n * @param {Array<string>} breadcrumbs Current page breadcrumbs\r\n */\r\nexport const setCurrentPageBreadcrumbs = (\r\n  pageTitle: string,\r\n  breadcrumbs: Array<string>\r\n): void => {\r\n  store.dispatch(Actions.SET_BREADCRUMB_ACTION, {\r\n    title: pageTitle,\r\n    pageBreadcrumbPath: breadcrumbs,\r\n  });\r\n};\r\n\r\n/**\r\n * Sets current page breadcrumbs\r\n * @param {string} title Current page title name\r\n */\r\nexport const setCurrentPageTitle = (title: string): void => {\r\n  store.dispatch(Actions.SET_BREADCRUMB_ACTION, {\r\n    title: title,\r\n  });\r\n};\r\n","<template>\n  <v-container class=\"bg-theme-smm\">\n    <v-card>\n      <div\n        class=\"card-header mb-2 px-0 cursor-pointer\"\n        role=\"button\"\n        data-bs-toggle=\"collapse\"\n        data-bs-target=\"#kt_form1\"\n        aria-expanded=\"true\"\n        aria-controls=\"kt_form1\"\n      >\n        <div class=\"card-title\">\n          <div class=\"d-flex align-items-center\">\n            <!--begin::Bullet-->\n            <span\n              class=\"bullet bullet-vertical h-50px\"\n              :class=\"`bg-yellow-smm`\"\n            ></span>\n            <div class=\"ml-2 flex-grow-1\">\n              <h2 class=\"text-white text-hover-primary fw-bolder\">\n                Nouveau Plan d'action\n              </h2>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div id=\"kt_form1\" class=\"pt-3 mx-4 collapse show\">\n        <div class=\"w-100\">\n          <div id=\"kt_account_profile_details container\" class=\"collapse show\">\n            <div class=\"text-white fw-bold fs-2\">\n              <div class=\"d-flex flex-wrap\">\n                <v-form @submit.prevent=\"submitForm\">\n                  <v-row>\n                    <v-col md=\"6\">\n                      <v-autocomplete\n                        :disabled=\"$route.params.id\"\n                        clearable\n                        color=\"yellow\"\n                        class=\"fs-9\"\n                        v-model=\"data.analyse_env\"\n                        :items=\"envOptions\"\n                        :item-title=\"\n                          (e) => {\n                            return (\n                              'kt-' +\n                              e.id +\n                              ' Activité : ' +\n                              e.activite.name +\n                              ' F*G : ' +\n                              e.F_G +\n                              ' Impact Résiduel : ' +\n                              e.impact_residuel\n                            );\n                          }\n                        \"\n                        density=\"compact\"\n                        return-object\n                        label=\"Environemmentale Analyse Associé\"\n                      ></v-autocomplete\n                    ></v-col>\n                    <v-col md=\"6\"\n                      ><v-text-field v-model=\"data.name\" label=\"Name\" required>\n                      </v-text-field\n                    ></v-col>\n                    <v-col md=\"6\" class=\"d-none\">\n                      <v-text-field\n                        v-model=\"data.ordre_priorite\"\n                        label=\"Priority\"\n                        type=\"number\"\n                      >\n                      </v-text-field>\n                    </v-col>\n                    <v-col md=\"6\">\n                      <v-text-field\n                        v-model=\"data.delai\"\n                        label=\"Delai\"\n                        type=\"date\"\n                      >\n                      </v-text-field>\n                      <div class=\"bg-light bg-opacity-5 mb-3\">\n                        <v-label class=\"ml-3 my-4\">Progrés</v-label>\n                        <v-slider\n                          step=\"5\"\n                          show-ticks\n                          class=\"p-3\"\n                          v-model=\"data.progress\"\n                          :color=\"\n                            data.progress < 30\n                              ? 'info'\n                              : data.progress < 60\n                              ? 'primary'\n                              : 'success'\n                          \"\n                          thumb-label=\"always\"\n                        ></v-slider>\n                      </div>\n                    </v-col>\n                    <v-col md=\"6\">\n                      <v-textarea\n                        v-model=\"data.description\"\n                        label=\"Description\"\n                        required\n                      >\n                      </v-textarea>\n                    </v-col>\n                    <v-col md=\"6\">\n                      <v-select\n                        v-model=\"data.selectedUsers\"\n                        :items=\"userOptions\"\n                        :items-label=\"userOptions\"\n                        label=\"Responsables\"\n                        item-title=\"name\"\n                        return-object\n                        multiple\n                        chips\n                      ></v-select>\n                    </v-col>\n                    <v-col md=\"6\" class=\"d-none\">\n                      <v-textarea\n                        v-model=\"data.notes\"\n                        label=\"Notes\"\n                      ></v-textarea\n                    ></v-col>\n                    <v-col md=\"6\">\n                      <v-file-input\n                        v-model=\"data.documents\"\n                        label=\"Documents\"\n                      ></v-file-input\n                    ></v-col>\n                    <v-col md=\"6\"> </v-col>\n                    <v-col md=\"6\" class=\"d-none\">\n                      <v-text-field\n                        v-model=\"data.cout\"\n                        label=\"COÙT\"\n                        type=\"number\"\n                      ></v-text-field\n                    ></v-col>\n                    <v-col md=\"12\">\n                      <v-btn\n                        type=\"submit\"\n                        class=\"float-right btn-primary btn m-4\"\n                        ><v-icon icon=\"mdi-plus\"></v-icon> Ajouter</v-btn\n                      >\n                    </v-col></v-row\n                  >\n                </v-form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport listValRef from \"@/core/data/valeur-ref\";\nimport Swal from \"sweetalert2/dist/sweetalert2.min.js\";\nimport { setCurrentPageBreadcrumbs } from \"@/core/helpers/breadcrumb\";\nimport { onMounted } from \"vue\";\nexport default {\n  setup() {\n    onMounted(() => {\n      setCurrentPageBreadcrumbs(\"Ajouter un PAE\", [\"Plan d'action\"]);\n    });\n\n    return {};\n  },\n  computed: {\n    currentRouteName() {\n      return window.location.origin;\n    },\n  },\n  data() {\n    return {\n      data: {\n        analyse_env: null,\n        name: \"\",\n        description: \"\",\n        progress: 0,\n        delai: null,\n        ordre_priorite: 0,\n        status: \"planned\",\n        notes: \"\",\n        documents: \"\",\n        cout: null,\n        selectedEnvs: [],\n        selectedUsers: [],\n      },\n      statusOptions: [\"planned\", \"in progress\", \"completed\"],\n      userOptions: [],\n      envOptions: [],\n    };\n  },\n  async created() {\n    this.fetch();\n  },\n  methods: {\n    async fetch() {\n      await axios\n        .get(this.currentRouteName + \"/api/analyse\")\n        .then((response) => {\n          this.envOptions = response.data;\n        });\n      if (this.$route.params.id) {\n        const analyse = await axios.get(\n          this.currentRouteName + \"/api/analyse/\" + this.$route.params.id\n        );\n        this.data.analyse_env = analyse.data;\n      }\n      const users = await axios.get(this.currentRouteName + \"/api/users\");\n      this.userOptions = users.data;\n    },\n    submitForm() {\n      console.log(this.data.selectedUsers);\n      const data = {\n        name: this.data.name,\n        description: this.data.description,\n        progress: this.data.progress,\n        delai: this.data.delai,\n        ordre_priorite: this.data.ordre_priorite,\n        notes: this.data.notes,\n        // documents: this.data.documents,\n        cout: this.data.cout,\n        analyse_env_id: this.data.analyse_env.id,\n        responsables: this.data.selectedUsers.map((e) => e.id),\n        // user_ids: this.selectedUsers.map((user) => user.id),\n      };\n      axios\n        .post(this.currentRouteName + \"/api/action\", data)\n        .then((response) => {\n          Swal.fire({\n            text: \"Plan d'action bien Ajouté\",\n            icon: \"success\",\n            buttonsStyling: false,\n            confirmButtonText: \"Ok\",\n            customClass: {\n              confirmButton: \"btn fw-bold btn-light-success\",\n            },\n          }).then((data) => {\n            this.$router.push({\n              name: \"apps-analyse-list-action\",\n            });\n          });\n        })\n        .catch(function (error) {\n          Swal.fire({\n            text: error,\n            icon: \"error\",\n            buttonsStyling: false,\n            confirmButtonText: \"Try again!\",\n            customClass: {\n              confirmButton: \"btn fw-bold btn-light-danger\",\n            },\n          });\n        });\n    },\n  },\n};\n</script>\n<style>\n.bg-theme-smm {\n  background: transparent;\n}\n\n.bg-theme-smm .v-card {\n  background: #261b235e;\n  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\n  backdrop-filter: blur(5px);\n  -webkit-backdrop-filter: blur(5px);\n  border: 1px solid rgba(113, 85, 34, 0.06);\n}\n</style>\n","import { render } from \"./AddActionAnalyse.vue?vue&type=template&id=3631c1c1\"\nimport script from \"./AddActionAnalyse.vue?vue&type=script&lang=js\"\nexport * from \"./AddActionAnalyse.vue?vue&type=script&lang=js\"\n\nimport \"./AddActionAnalyse.vue?vue&type=style&index=0&id=3631c1c1&lang=css\"\n\nimport exportComponent from \"/Users/dev01/Documents/projects/metronic_v8.0.38/vue/demo1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["listValRef","setCurrentPageBreadcrumbs","pageTitle","breadcrumbs","title","pageBreadcrumbPath","setCurrentPageTitle","class","role","id","submitForm","md","disabled","$route","params","clearable","color","data","analyse_env","items","envOptions","density","label","name","required","ordre_priorite","type","delai","step","progress","description","selectedUsers","userOptions","multiple","chips","notes","documents","cout","icon","setup","computed","currentRouteName","window","location","origin","status","selectedEnvs","statusOptions","async","this","fetch","methods","axios","then","response","analyse","users","console","log","analyse_env_id","responsables","map","e","text","buttonsStyling","confirmButtonText","customClass","confirmButton","$router","push","catch","error","__exports__","render"],"sourceRoot":""}