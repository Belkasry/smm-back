"use strict";(self["webpackChunkdemo1"]=self["webpackChunkdemo1"]||[]).push([[4345],{9945:function(e,t){const a={};t["Z"]=a},8932:function(e,t,a){a.d(t,{M:function(){return o},V:function(){return n}});var l=a(6450),s=a(5758);const o=(e,t)=>{l.Z.dispatch(s.e.SET_BREADCRUMB_ACTION,{title:e,pageBreadcrumbPath:t})},n=e=>{l.Z.dispatch(s.e.SET_BREADCRUMB_ACTION,{title:e})}},4345:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});var l=a(6252),s=a(3577),o=a(9963);const n={class:"card-header mb-2 px-0 cursor-pointer",role:"button","data-bs-toggle":"collapse","data-bs-target":"#kt_form1","aria-expanded":"true","aria-controls":"kt_form1"},d={class:"card-title"},i={class:"d-flex align-items-center"},r=(0,l._)("div",{class:"ml-2 flex-grow-1"},[(0,l._)("h2",{class:"text-white text-hover-primary fw-bolder"}," Nouveau Plan d'action ")],-1),u={id:"kt_form1",class:"pt-3 mx-4 collapse show"},m={class:"w-100"},c={id:"kt_account_profile_details container",class:"collapse show"},p={class:"text-white fw-bold fs-2"},b={class:"d-flex flex-wrap"},f={class:"bg-light bg-opacity-5 mb-3"};function _(e,t,a,_,h,v){const w=(0,l.up)("v-autocomplete"),g=(0,l.up)("v-col"),y=(0,l.up)("v-text-field"),V=(0,l.up)("v-label"),W=(0,l.up)("v-slider"),U=(0,l.up)("v-textarea"),x=(0,l.up)("v-select"),k=(0,l.up)("v-icon"),O=(0,l.up)("v-btn"),R=(0,l.up)("v-row"),A=(0,l.up)("v-form"),C=(0,l.up)("v-card"),N=(0,l.up)("v-container");return(0,l.wg)(),(0,l.j4)(N,{class:"bg-theme-smm"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l._)("div",d,[(0,l._)("div",i,[(0,l._)("span",{class:(0,s.C_)(["bullet bullet-vertical h-50px","bg-yellow-smm"])}),r])])]),(0,l._)("div",u,[(0,l._)("div",m,[(0,l._)("div",c,[(0,l._)("div",p,[(0,l._)("div",b,[(0,l.Wm)(A,{onSubmit:(0,o.iM)(v.submitForm,["prevent"])},{default:(0,l.w5)((()=>[(0,l.Wm)(R,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{md:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{disabled:e.$route.params.id,clearable:"",color:"yellow",class:"fs-9",modelValue:h.data.analyse_env,"onUpdate:modelValue":t[0]||(t[0]=e=>h.data.analyse_env=e),items:h.envOptions,"item-title":e=>"kt-"+e.id+" Activité : "+e.activite.name+" F*G : "+e.F_G+" Impact Résiduel : "+e.impact_residuel,density:"compact","return-object":"",label:"Environemmentale Analyse Associé"},null,8,["disabled","modelValue","items","item-title"])])),_:1}),(0,l.Wm)(g,{md:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{modelValue:h.data.name,"onUpdate:modelValue":t[1]||(t[1]=e=>h.data.name=e),label:"Name",required:""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(g,{md:"6",class:"d-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{modelValue:h.data.ordre_priorite,"onUpdate:modelValue":t[2]||(t[2]=e=>h.data.ordre_priorite=e),label:"Priority",type:"number"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(g,{md:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{modelValue:h.data.delai,"onUpdate:modelValue":t[3]||(t[3]=e=>h.data.delai=e),label:"Delai",type:"date"},null,8,["modelValue"]),(0,l._)("div",f,[(0,l.Wm)(V,{class:"ml-3 my-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Progrés")])),_:1}),(0,l.Wm)(W,{step:"5","show-ticks":"",class:"p-3",modelValue:h.data.progress,"onUpdate:modelValue":t[4]||(t[4]=e=>h.data.progress=e),color:h.data.progress<30?"info":h.data.progress<60?"primary":"success","thumb-label":"always"},null,8,["modelValue","color"])])])),_:1}),(0,l.Wm)(g,{md:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{modelValue:h.data.description,"onUpdate:modelValue":t[5]||(t[5]=e=>h.data.description=e),label:"Description",required:""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(g,{md:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{modelValue:h.data.selectedUsers,"onUpdate:modelValue":t[6]||(t[6]=e=>h.data.selectedUsers=e),items:h.userOptions,"items-label":h.userOptions,label:"Responsables","item-title":"name","return-object":"",multiple:"",chips:""},null,8,["modelValue","items","items-label"])])),_:1}),(0,l.Wm)(g,{md:"6",class:"d-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{modelValue:h.data.notes,"onUpdate:modelValue":t[7]||(t[7]=e=>h.data.notes=e),label:"Notes"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(g,{md:"6"}),(0,l.Wm)(g,{md:"6",class:"d-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{modelValue:h.data.cout,"onUpdate:modelValue":t[8]||(t[8]=e=>h.data.cout=e),label:"COÙT",type:"number"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(g,{md:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{type:"submit",class:"float-right btn-primary btn m-4"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{icon:"mdi-plus"}),(0,l.Uk)(" Ajouter")])),_:1})])),_:1})])),_:1})])),_:1},8,["onSubmit"])])])])])])])),_:1})])),_:1})}var h=a(8433),v=(a(9945),a(8542)),w=a.n(v),g=a(8932),y={setup(){return(0,l.bv)((()=>{(0,g.M)("Ajouter un PAE",["Plan d'action"])})),{}},computed:{currentRouteName(){return window.location.origin}},data(){return{data:{analyse_env:null,name:"",description:"",progress:0,delai:null,ordre_priorite:0,status:"planned",notes:"",documents:"",cout:null,selectedEnvs:[],selectedUsers:[]},statusOptions:["planned","in progress","completed"],userOptions:[],envOptions:[]}},async created(){this.fetch()},methods:{async fetch(){if(await h.Z.get(this.currentRouteName+"/api/analyse").then((e=>{this.envOptions=e.data})),this.$route.params.id){const e=await h.Z.get(this.currentRouteName+"/api/analyse/"+this.$route.params.id);this.data.analyse_env=e.data}const e=await h.Z.get(this.currentRouteName+"/api/users");this.userOptions=e.data},submitForm(){console.log(this.data.selectedUsers);const e={name:this.data.name,description:this.data.description,progress:this.data.progress,delai:this.data.delai,ordre_priorite:this.data.ordre_priorite,notes:this.data.notes,cout:this.data.cout,analyse_env_id:this.data.analyse_env.id,responsables:this.data.selectedUsers.map((e=>e.id))};h.Z.post(this.currentRouteName+"/api/action",e).then((e=>{w().fire({text:"Plan d'action bien Ajouté",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn fw-bold btn-light-success"}}).then((e=>{this.$router.push({name:"apps-analyse-list-action"})}))})).catch((function(e){w().fire({text:e,icon:"error",buttonsStyling:!1,confirmButtonText:"Réessayer!",customClass:{confirmButton:"btn fw-bold btn-light-danger"}})}))}}},V=a(3744);const W=(0,V.Z)(y,[["render",_]]);var U=W}}]);
//# sourceMappingURL=4345.fb7748fb.js.map